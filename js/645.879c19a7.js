"use strict";(self["webpackChunkquanlynhanvien_amis_ketoan"]=self["webpackChunkquanlynhanvien_amis_ketoan"]||[]).push([[645],{2707:function(e,t,a){var o=a(7877);const i=()=>o.Z.get("/CommodityGroups"),l=e=>o.Z.post("/CommodityGroups/fitter",e),n=e=>o.Z.post("/CommodityGroups",e),d=e=>o.Z.get(`/CommodityGroups/${e}`),u=e=>o.Z.put(`/CommodityGroups/${e.commodityGroupID}`,e),c=e=>o.Z["delete"](`/CommodityGroups/${e}`),s=()=>o.Z.get("/CommodityGroups/export_data"),r=e=>o.Z.get(`/CommodityGroups/ToggleActive/${e}`),m=()=>o.Z.get("/CommodityGroups/active");t["Z"]={exportDataApi:s,deleteRecordApi:c,editRecordApi:u,getRecordList:l,createRecordApi:n,getRecordApi:d,getAllRecordList:i,toggleActiveApi:r,getAllRecordListActive:m}},4419:function(e,t,a){var o=a(177);const{CTRL:i,SHIFT:l,ESC:n,S:d}=o.Z,u=[],c=function(e,t,a,o,c,s,r){e.keyCode===n?t(a):e.keyCode!==i&&e.keyCode!==l&&e.keyCode!==d||u.includes(e.keyCode)||(u.push(e.keyCode),3===u.length?(u.length=0,o(c)):2===u.length&&(u.includes(l)||(e.preventDefault(),u.length=0,s(r))))},s=function(e){e.keyCode!==i&&e.keyCode!==l&&e.keyCode!==d||u.includes(e.keyCode)&&(u.length=0)};t["Z"]={handleEventFormCtrlShiftS:c,handleEventInterruptFormCtrlShiftS:s}},8410:function(e,t){t["Z"]={WANNING_DELETE:"Bạn có thực sự muốn xoá bản ghi ",QUESTION_DATA_CHANGE:"Dữ liệu đã bị thay đổi. Bạn có muốn cất không?",ERROR_EMPTY_DATA:"Không được để trống ",ERROR_CORRECT_DATA:"Kiểm tra nhập đúng ",WANNING_DELETE_ALL:"Bạn có thực sự muốn xoá toàn bộ bản ghi được chọn?",DUPLICATE_CODE:"đã tồn tại trong hệ thống, vui lòng kiểm tra lại.",INVALID_INPUT:"Sai dữ liệu đầu vào, vui lòng kiểm tra lại",employeeNotification:{validateCode:"Mã nhân viên không được để trống.",validateName:"Tên nhân viên không được để trống.",validateUnit:"Dữ liệu <đơn vị> không có trong danh mục.",validatePhoneNumber:"Không đúng định dạng số điện thoại di động.",validateLandlinePhone:"Không đúng định dạng số điện thoại cố định.",validateEmail:"Không đúng định dạng Email.",validateDateOfBirth:"Ngày sinh phải nhỏ hơn ngày hiện tại.",validateDayForIdentity:"Ngày cấp phải nhỏ hơn ngày hiện tại.",nameDuplicateCode:"Mã nhân viên"},unitCalculationNotification:{validateName:"Đơn vị không được để trống"},depotNotification:{validateCode:"Mã kho không được để trống",validateName:"Tên kho không được để trống"},commodityGroupNotification:{validateCode:"Mã nhóm nguyên vật liệu không được để trống",validateName:"Tên nhóm nguyên vật liệu không được để trống"},inventoryItemNotification:{validateCode:"Mã hàng hoá không được để trống.",validateName:"Tên không được để trống.",validateUnit:"Đơn vị không có trong danh mục."}}},9176:function(e,t){t["Z"]={validateEmail:e=>{var t=/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/;return t.test(e)},validatePhone:e=>{var t=/(03|02|05|07|08|09|01[2|6|8|9])+([0-9]{8})\b/;return t.test(e)}}},5734:function(e,t,a){a.d(t,{Z:function(){return p}});var o=a(3396),i=a(7139),l=a(9242);const n={key:0,class:"tool-tip"},d=["disabled","type","placeholder","tabindex"];function u(e,t,a,u,c,s){return(0,o.wg)(),(0,o.iD)("div",{class:(0,i.C_)(["data-input",{"is-valid":u.isValid|u.isValidEmailPhone}])},[(0,o._)("label",{class:(0,i.C_)({required:a.required})},(0,i.zw)(a.label),3),a.toolTip?((0,o.wg)(),(0,o.iD)("span",n,(0,i.zw)(a.toolTip),1)):(0,o.kq)("",!0),(0,o.wy)((0,o._)("input",{disabled:a.disabled,ref:"tagInput",class:(0,i.C_)(["input",{"is-number":a.isNumber}]),type:a.type,"onUpdate:modelValue":t[0]||(t[0]=e=>u.valueHeader=e),placeholder:a.placeholder,tabindex:a.tab,onInput:t[1]||(t[1]=(...e)=>u.handleInput&&u.handleInput(...e)),onBlur:t[2]||(t[2]=(...e)=>u.handleCheckEmailPhone&&u.handleCheckEmailPhone(...e))},null,42,d),[[l.YZ,u.valueHeader]]),(0,o._)("span",{class:"message-valid",style:(0,i.j5)({left:a.leftMessage})},(0,i.zw)(a.messageValid),5)],2)}var c=a(4870),s=a(9176),r={props:["modelValue","maxLength","placeholder","required","type","messageValid","label","focus","tab","toolTip","isPhone","isEmail","isNumber","leftMessage","maxValue","disabled"],emits:["update:modelValue"],setup(e,t){const a=(0,c.iH)(null),{focus:i,required:l,isEmail:n,isPhone:d,maxLength:u,modelValue:r,isNumber:m,maxValue:v}=(0,c.BK)(e),p=(0,c.iH)(!1),h=(0,c.iH)(!1),{validateEmail:g,validatePhone:y}=s.Z,f=(0,c.iH)("");function C(e){if(u.value&&!m.value)e.target.value.length<=u.value?(b(e.target.value),h.value=!1,l.value&&(""==e.target.value.trim()?p.value=!0:p.value=!1)):f.value=r.value;else if(m.value){const t=N(e.target.value);E(t)||""===t?"."===e.data||","===e.data?f.value=_(r.value)+",":(f.value=_(r.value),b(t)):f.value=_(r.value)}else b(e.target.value),h.value=!1,l.value&&(""==e.target.value?p.value=!0:p.value=!1)}function b(e){v.value?Number(e)<=v.value?t.emit("update:modelValue",e):f.value=_(r.value):t.emit("update:modelValue",e)}function _(e){if(e){let o=Math.trunc(e);const i=Number((e-o).toFixed(2));if(o=""+o,o.length>3){var t=o.length%3,a=t>0?o.substring(0,t):"";for(let e=0;e<Math.floor(o.length/3);e++)a+=0==t&&0==e?o.substring(t+3*e,t+3*e+3):"."+o.substring(t+3*e,t+3*e+3);return 0!==i?a+","+(i+"").slice(2):a}return 0!==i?o+","+(i+"").slice(2):o}return 0===e||"0"===e?0:""}function N(e){const t=e.replace(/\./g,"").replace(/,/g,".");return t||""}function k(e){""!=e.target.value&&(n.value?!1===g(e.target.value)?h.value=!0:h.value=!1:d.value&&(!1===y(e.target.value)?h.value=!0:h.value=!1))}function E(e){return!isNaN(parseFloat(e))&&!isNaN(e-0)}return(0,o.YP)(r,(e=>{m.value?f.value=_(e):f.value=e})),(0,o.wF)((()=>{m.value?f.value=_(r.value):f.value=r.value})),(0,o.bv)((()=>{!0===i.value&&setTimeout((()=>{a.value.focus()}),150)})),{tagInput:a,isValid:p,valueHeader:f,isValidEmailPhone:h,handleCheckEmailPhone:k,handleInput:C}}},m=a(89);const v=(0,m.Z)(r,[["render",u]]);var p=v},8781:function(e,t,a){a.r(t),a.d(t,{default:function(){return H}});var o=a(3396),i=a(7139);const l=e=>((0,o.dD)("data-v-f2d1d18e"),e=e(),(0,o.Cn)(),e),n={class:"modal-body"},d={class:"form"},u={class:"form-header"},c={class:"modal-title"},s={class:"modal-close"},r=l((()=>(0,o._)("div",{class:"modal-icon modal-icon_help"},null,-1))),m={class:"form-container"},v={class:"form-item_input"},p={class:"form-group ms-small"},h={class:"form-group ms-big"},g={class:"form-group"},y={class:"form-action"},f={class:"form-action_container"},C={class:"form-action_item"},b={class:"form-action_item"},_={ref:"focusLoop",class:"focus-loop"};function N(e,t,a,l,N,k){const E=(0,o.up)("input-default"),A=(0,o.up)("base-combobox");return(0,o.wg)(),(0,o.iD)("div",n,[(0,o._)("div",d,[(0,o._)("div",u,[(0,o._)("div",c,[(0,o._)("h2",null,(0,i.zw)(l.titleForm),1)]),(0,o._)("div",s,[r,(0,o._)("div",{onClick:t[0]||(t[0]=e=>l.handleCloseModal(!1)),class:"modal-icon modal-icon_close"})])]),(0,o._)("div",m,[(0,o._)("div",v,[(0,o._)("div",p,[(0,o.Wm)(E,{focus:!0,required:!0,type:"text",maxLength:25,messageValid:l.commodityGroupNotification.validateCode,label:"Mã",class:(0,i.C_)({"is-valid":l.isValid&&""==l.commodityGroup.commodityCode}),modelValue:l.commodityGroup.commodityCode,"onUpdate:modelValue":t[1]||(t[1]=e=>l.commodityGroup.commodityCode=e),ref:"inputFocus"},null,8,["messageValid","class","modelValue"])]),(0,o._)("div",h,[(0,o.Wm)(E,{required:!0,type:"text",maxLength:80,messageValid:l.commodityGroupNotification.validateName,label:"Tên",class:(0,i.C_)({"is-valid":l.isValid&&""==l.commodityGroup.commodityName}),modelValue:l.commodityGroup.commodityName,"onUpdate:modelValue":t[2]||(t[2]=e=>l.commodityGroup.commodityName=e)},null,8,["messageValid","class","modelValue"])])]),(0,o._)("div",g,[(0,o.Wm)(A,{widthLabelCode:"150px",options:l.optionCommodityGroup,value:"commodityGroupID",header:"commodityName",label:"Thuộc",labelCode:"Mã nhóm",labelName:"Tên nhóm",headerCode:"commodityCode",modelValue:l.commodityGroup.parentID,"onUpdate:modelValue":t[3]||(t[3]=e=>l.commodityGroup.parentID=e)},null,8,["options","modelValue"])])]),(0,o._)("div",y,[(0,o._)("div",f,[(0,o._)("div",C,[(0,o._)("button",{onClick:t[4]||(t[4]=e=>l.handleSaveData(!0)),style:{"margin-right":"9px"},class:"btn modal-icon btn-form_cat"}," Cất "),(0,o._)("button",{onClick:t[5]||(t[5]=e=>l.handleSaveData(!1)),class:"btn btn-success modal-icon btn-form_cat-them"}," Cất và thêm ")]),(0,o._)("div",b,[(0,o._)("button",{onClick:t[6]||(t[6]=e=>l.handleCloseModal(!0)),class:"btn"}," Huỷ ")])])]),(0,o._)("button",_,null,512)])])}var k=a(4870),E=a(5734),A=a(5257),G=a(65),w=a(177),D=a(8410),I=a(4419),T=a(7794),V=a(2707),Z=a(2325),L={components:{InputDefault:E.Z,BaseCombobox:A.Z},props:{recordEdit:{type:Object},recordAdd:{type:Object}},setup(e,t){const{createRecordApi:a,editRecordApi:i,getAllRecordList:l,getRecordList:n}=V.Z,d=(0,k.iH)(""),{QUESTION_DATA_CHANGE:u,commodityGroupNotification:c}=D.Z,s=(0,k.iH)(null),r=(0,k.iH)(null),m=(0,k.iH)(!0),{recordEdit:v,recordAdd:p}=(0,k.BK)(e),h=(0,k.iH)(!1),g=(0,G.oR)(),{TypeSuccess:y,MessageSuccessAdd:f,MessageSuccessEdit:C,AddFormCommodityGroup:b,EditFormCommodityGroup:_}=w.Z,N=(0,k.iH)({commodityCode:"",commodityName:"",parentID:"0",isActive:!0}),E=(0,k.iH)(null),A=(0,k.iH)({commodityCode:"",commodityName:"",parentID:"0",isActive:!0}),L=(0,k.iH)([]),{listToTree:S}=Z.Z;(0,o.wF)((async()=>{await(0,T.Z)(l,null,(async e=>{L.value=S(e,"commodityGroupID")}),g,!0),d.value=b,v.value?(d.value=_,N.value={...v.value},m.value=!1,E.value={...v.value}):(d.value=b,p.value&&(N.value={...p.value}))}));const R=function(){s.value.tagInput.focus()},{handleEventFormCtrlShiftS:H,handleEventInterruptFormCtrlShiftS:x}=I.Z;function M(e){try{H(e,K,null,U,!1,U,!0)}catch(t){console.log(t)}}function F(){return[""===N.value.commodityCode.trim()?c.validateCode:null,""===N.value.commodityName.trim()?c.validateName:null].filter((e=>{if(e)return!0}))}(0,o.bv)((()=>r.value.addEventListener("focus",R))),(0,o.bv)((()=>window.addEventListener("keydown",M))),(0,o.bv)((()=>window.addEventListener("keyup",x))),(0,o.Ah)((()=>window.removeEventListener("focus",R))),(0,o.Ah)((()=>window.removeEventListener("keydown",M))),(0,o.Ah)((()=>window.removeEventListener("keyup",x)));const P=(0,k.iH)(!1);async function O(e){N.value.parentID||(N.value={...N.value,parentID:"0"}),await(0,T.Z)(e,{...N.value},(async e=>{t.emit("handle-save-data-props",{...N.value,commodityGroupID:e}),g.dispatch("config/addNotification",{type:y,message:m.value?f:C}),P.value=!1;const a=g.state.commodityGroup.filter;await(0,T.Z)(l,null,(async e=>{L.value=S(e,"commodityGroupID")}),g,!0),m.value||(m.value=!0),await(0,T.Z)(n,a,(async e=>{g.dispatch("commodityGroup/getRecordListAction",{recordList:S(e.recordList,"commodityGroupID"),totalCount:e.totalCount})}),g,!0)}),g,!1,(()=>{P.value=!0}))}async function U(e){try{const o=F();o.length>0?(h.value=!0,g.dispatch("config/setToggleShowNotificationErrorAction",o)):(m.value?await O(a):await O(i),!0===e&&!1===P.value?t.emit("handle-click-close-modal"):!1===P.value&&(d.value=b,h.value=!1,N.value={...A.value},s.value.tagInput.focus()))}catch(o){console.log(o)}}function q(){try{t.emit("handle-click-close-modal")}catch(e){console.log(e)}}function B(){U(!0)}function K(e){try{e?t.emit("handle-click-close-modal"):m.value?JSON.stringify(N.value)!=JSON.stringify(A.value)?W():t.emit("handle-click-close-modal"):!1===m.value&&(JSON.stringify(N.value)!=JSON.stringify(E.value)?W():t.emit("handle-click-close-modal"))}catch(a){console.log(a)}}function W(){g.dispatch("config/setToggleShowNotificationQuestionAction",{action:B,refuseAction:q,message:u})}return{inputFocus:s,commodityGroup:N,commodityGroupNotification:c,isValid:h,optionCommodityGroup:L,focusLoop:r,titleForm:d,handleCloseModal:K,handleSaveData:U}},emits:["handle-click-close-modal","handle-save-data-props"]},S=a(89);const R=(0,S.Z)(L,[["render",N],["__scopeId","data-v-f2d1d18e"]]);var H=R}}]);
//# sourceMappingURL=645.879c19a7.js.map