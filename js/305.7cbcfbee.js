"use strict";(self["webpackChunkquanlynhanvien_amis_ketoan"]=self["webpackChunkquanlynhanvien_amis_ketoan"]||[]).push([[305],{2707:function(e,a,o){var t=o(7877);const l=()=>t.Z.get("/CommodityGroups"),r=e=>t.Z.post("/CommodityGroups/fitter",e),c=e=>t.Z.post("/CommodityGroups",e),u=e=>t.Z.get(`/CommodityGroups/${e}`),n=e=>t.Z.put(`/CommodityGroups/${e.commodityGroupID}`,e),i=e=>t.Z["delete"](`/CommodityGroups/${e}`),h=()=>t.Z.get("/CommodityGroups/export_data"),d=e=>t.Z.get(`/CommodityGroups/ToggleActive/${e}`),s=()=>t.Z.get("/CommodityGroups/active");a["Z"]={exportDataApi:h,deleteRecordApi:i,editRecordApi:n,getRecordList:r,createRecordApi:c,getRecordApi:u,getAllRecordList:l,toggleActiveApi:d,getAllRecordListActive:s}},2957:function(e,a,o){o.r(a),o.d(a,{default:function(){return D}});var t=o(3396),l=o(7139),r=o(9242);const c=e=>((0,t.dD)("data-v-030e7748"),e=e(),(0,t.Cn)(),e),u={ref:"elmMain",class:"form-filter-container"},n={class:"formFilter"},i=c((()=>(0,t._)("span",null,"Lọc",-1))),h=c((()=>(0,t._)("div",{class:"table-function_series-icon"},null,-1))),d=[i,h],s={class:"form-control"},v={class:"form-group no-padding"},m={class:"form-group"},p={class:"form-group no-padding"},S={class:"form-group"},y={class:"form-action_container"},g={class:"form-action_item"},f={class:"form-action_item"},T={ref:"focusLoop",class:"focus-loop"};function b(e,a,o,c,i,h){const b=(0,t.up)("input-combobox");return(0,t.wg)(),(0,t.iD)("div",u,[(0,t._)("div",n,[(0,t._)("div",{onClick:a[0]||(a[0]=(...e)=>c.handleToggleSearchKey&&c.handleToggleSearchKey(...e)),class:"table-function_series"},d)]),(0,t.wy)((0,t._)("div",{class:(0,l.C_)(["ms-dropdown-menu",{active:c.isActiveAnimation}])},[(0,t._)("div",s,[(0,t._)("div",v,[(0,t.Wm)(b,{options:[{value:"",header:"Tất cả"},{value:c.eNum.Goods,header:"Hàng hoá"},{value:c.eNum.Service,header:"Dịch vụ"},{value:c.eNum.Materials,header:"Nguyên vật liệu"},{value:c.eNum.FinishedProduct,header:"Thành phẩm"},{value:c.eNum.ToolTools,header:"Công cụ, dụng cụ"}],value:"value",header:"header",label:"Tính chất",modelValue:c.nature.valueSearch,"onUpdate:modelValue":a[1]||(a[1]=e=>c.nature.valueSearch=e),textField:c.nature.headerSearch,"onUpdate:textField":a[2]||(a[2]=e=>c.nature.headerSearch=e),ref:"inputFocus"},null,8,["options","modelValue","textField"])]),(0,t._)("div",m,[(0,t.Wm)(b,{options:c.optionCommodityGroup,widthOptionSelect:"500px",widthLabelCode:"150px",value:"commodityGroupID",header:"commodityName",labelCode:"Mã nhóm",labelName:"Tên nhóm",headerCode:"commodityCode",label:"Nhóm",modelValue:c.group.valueSearch,"onUpdate:modelValue":a[3]||(a[3]=e=>c.group.valueSearch=e),textField:c.group.headerSearch,"onUpdate:textField":a[4]||(a[4]=e=>c.group.headerSearch=e)},null,8,["options","modelValue","textField"])]),(0,t._)("div",p,[(0,t.Wm)(b,{options:[{value:"",header:"Tất cả"},{value:1,header:"Còn tồn"},{value:2,header:"Sắp hết hàng"},{value:3,header:"Hết hàng"}],value:"value",header:"header",label:"Tình trạng tồn kho",modelValue:c.inventory.valueSearch,"onUpdate:modelValue":a[5]||(a[5]=e=>c.inventory.valueSearch=e),textField:c.inventory.headerSearch,"onUpdate:textField":a[6]||(a[6]=e=>c.inventory.headerSearch=e)},null,8,["modelValue","textField"])]),(0,t._)("div",S,[(0,t.Wm)(b,{options:[{value:"",header:"Tất cả"},{value:"true",header:"Đang sử dụng"},{value:"false",header:"Ngừng sử dụng"}],value:"value",header:"header",label:"Trạng thái",modelValue:c.status.valueSearch,"onUpdate:modelValue":a[7]||(a[7]=e=>c.status.valueSearch=e),textField:c.status.headerSearch,"onUpdate:textField":a[8]||(a[8]=e=>c.status.headerSearch=e)},null,8,["modelValue","textField"])])]),(0,t._)("div",y,[(0,t._)("div",g,[(0,t._)("button",{class:"btn",onClick:a[9]||(a[9]=e=>c.handleResetDataSearch())}," Đặt lại "),(0,t._)("button",{class:"btn btn-success",onClick:a[10]||(a[10]=e=>c.searchData())}," Lọc ")]),(0,t._)("div",f,[(0,t._)("button",{class:"btn",onClick:a[11]||(a[11]=e=>c.handleToggleSearchKey())}," Huỷ ")])]),(0,t._)("button",T,null,512)],2),[[r.F8,c.isShowSearchKey]])],512)}var _=o(177),C=o(4870),A=o(5257),k=o(2707),x=o(65),F=o(2325),G=o(7794),N={components:{InputCombobox:A.Z},setup(e,a){const o=(0,x.oR)(),l=(0,C.iH)(null),r=(0,C.iH)(!1),c=(0,C.iH)(null),u=(0,C.iH)([]),{listToTree:n}=F.Z;(0,t.wF)((async()=>{await(0,G.Z)(k.Z.getAllRecordList,null,(async e=>{u.value=n(e,"commodityGroupID")}),o,!0)}));const i=(0,C.iH)(!1);function h(){try{if(i.value?r.value=!1:setTimeout((()=>{r.value=!0}),0),i.value=!i.value,i.value){const e=o.state.inventoryItem.filter.customSearch.filter((e=>(e.valueSearch||0===e.valueSearch||"!=Null"===e.comparisonType||"=Null"===e.comparisonType)&&("Nature"===e.columnSearch||"CommodityGroupID"===e.columnSearch||"IsActive"===e.columnSearch)));e.forEach((e=>{e.columnSearch===d.value.columnSearch&&(d.value.valueSearch=e.valueSearch,d.value.headerSearch=e.headerSearch),e.columnSearch===s.value.columnSearch&&(s.value.valueSearch=e.valueSearch,s.value.headerSearch=e.headerSearch),e.columnSearch===m.value.columnSearch&&(m.value.valueSearch=e.valueSearch,m.value.headerSearch=e.headerSearch)}))}}catch(e){console.log(e)}}const d=(0,C.iH)({typeSearch:"number",columnSearch:"Nature",valueSearch:"",headerSearch:"",labelSearch:"Tính chất",comparisonType:"="}),s=(0,C.iH)({typeSearch:"text",columnSearch:"CommodityGroupID",valueSearch:"",headerSearch:"",labelSearch:"Nhóm",comparisonType:"%%"}),v=(0,C.iH)({typeSearch:"number",columnSearch:"QuantityTock",valueSearch:"",headerSearch:"",labelSearch:"Tình trạng tồn kho",comparisonType:"="}),m=(0,C.iH)({typeSearch:"number",columnSearch:"IsActive",valueSearch:"",headerSearch:"",labelSearch:"Trạng thái",comparisonType:"="}),p=function(){c.value.input.focus()};function S(){try{d.value.valueSearch="",s.value.valueSearch="",v.value.valueSearch="",m.value.valueSearch=""}catch(e){console.log(e)}}function y(){const e={...v.value};1==v.value.valueSearch?(e.valueSearch="MinimumStock",e.comparisonType=">="):2==v.value.valueSearch?(e.valueSearch="MinimumStock AND QuantityTock > 0",e.comparisonType="<"):3==v.value.valueSearch&&(e.valueSearch="0",e.comparisonType="<="),a.emit("handle-filter-data",{resetPage:!0,Nature:{...d.value},CommodityGroupID:{...s.value},QuantityTock:{...e},IsActive:{...m.value}}),h()}const g=(0,C.iH)(null),f=function(e){try{const a=g.value.contains(e.target);a||!0!==i.value||(r.value=!1,i.value=!1)}catch{return}};return(0,t.Ah)((()=>{window.removeEventListener("focus",p),window.removeEventListener("click",f)})),(0,t.bv)((()=>{window.addEventListener("click",f),l.value.addEventListener("focus",p)})),{nature:d,group:s,eNum:_.Z,elmMain:g,inventory:v,status:m,optionCommodityGroup:u,focusLoop:l,isShowSearchKey:i,isActiveAnimation:r,inputFocus:c,handleResetDataSearch:S,searchData:y,handleToggleSearchKey:h}},emits:["handle-filter-data"]},w=o(89);const Z=(0,w.Z)(N,[["render",b],["__scopeId","data-v-030e7748"]]);var D=Z}}]);
//# sourceMappingURL=305.7cbcfbee.js.map