"use strict";(self["webpackChunkquanlynhanvien_amis_ketoan"]=self["webpackChunkquanlynhanvien_amis_ketoan"]||[]).push([[671],{2707:function(e,t,o){var a=o(7877);const l=()=>a.Z.get("/CommodityGroups"),i=e=>a.Z.post("/CommodityGroups/fitter",e),n=e=>a.Z.post("/CommodityGroups",e),d=e=>a.Z.get(`/CommodityGroups/${e}`),c=e=>a.Z.put(`/CommodityGroups/${e.commodityGroupID}`,e),s=e=>a.Z["delete"](`/CommodityGroups/${e}`),u=()=>a.Z.get("/CommodityGroups/export_data"),r=e=>a.Z.get(`/CommodityGroups/ToggleActive/${e}`),m=()=>a.Z.get("/CommodityGroups/active");t["Z"]={exportDataApi:u,deleteRecordApi:s,editRecordApi:c,getRecordList:i,createRecordApi:n,getRecordApi:d,getAllRecordList:l,toggleActiveApi:r,getAllRecordListActive:m}},9871:function(e,t,o){var a=o(7877);const l=e=>a.Z.post("/Depots/fitter",e),i=e=>a.Z.post("/Depots",e),n=e=>a.Z.get(`/Depots/${e}`),d=e=>a.Z.put(`/Depots/${e.depotID}`,e),c=e=>a.Z["delete"](`/Depots/${e}`),s=()=>a.Z.get("/Depots/export_data"),u=e=>a.Z.get(`/Depots/ToggleActive/${e}`),r=()=>a.Z.get("/Depots"),m=()=>a.Z.get("/Depots/active");t["Z"]={exportDataApi:s,deleteRecordApi:c,editRecordApi:d,getRecordList:l,createRecordApi:i,getRecordApi:n,toggleActiveApi:u,getAllRecordList:r,getAllRecordListActive:m}},5575:function(e,t,o){var a=o(7877);const l=e=>a.Z.post("/InventoryItems/fitter",e),i=e=>a.Z.post("/InventoryItems",e),n=e=>a.Z.get(`/InventoryItems/${e}`),d=e=>a.Z.put(`/InventoryItems/${e.inventoryItemID}`,e),c=e=>a.Z["delete"](`/InventoryItems/${e}`),s=()=>a.Z.get("/InventoryItems/next_value"),u=e=>a.Z.post("/InventoryItems/bulk_delete",e),r=()=>a.Z.get("/InventoryItems/export_data"),m=e=>a.Z.get(`/InventoryItems/ToggleActive/${e}`),v=()=>a.Z.get("/InventoryItems/GetInventoryStatus");t["Z"]={exportDataApi:r,deleteMultipleApi:u,nextValue:s,deleteRecordApi:c,editRecordApi:d,getRecordList:l,createRecordApi:i,getRecordApi:n,toggleActiveApi:m,GetInventoryStatus:v}},7923:function(e,t,o){var a=o(7877);const l=e=>a.Z.post("/UnitCalculations/fitter",e),i=()=>a.Z.get("/UnitCalculations"),n=e=>a.Z.post("/UnitCalculations",e),d=e=>a.Z.get(`/UnitCalculations/${e}`),c=e=>a.Z.put(`/UnitCalculations/${e.unitCalculationID}`,e),s=e=>a.Z["delete"](`/UnitCalculations/${e}`),u=()=>a.Z.get("/UnitCalculations/export_data"),r=e=>a.Z.get(`/UnitCalculations/ToggleActive/${e}`),m=()=>a.Z.get("/UnitCalculations/active");t["Z"]={exportDataApi:u,deleteRecordApi:s,editRecordApi:c,getRecordList:l,createRecordApi:n,getRecordApi:d,toggleActiveApi:r,getAllRecordList:i,getAllRecordListActive:m}},8781:function(e,t,o){o.r(t),o.d(t,{default:function(){return L}});var a=o(3396),l=o(7139);const i=e=>((0,a.dD)("data-v-f2d1d18e"),e=e(),(0,a.Cn)(),e),n={class:"modal-body"},d={class:"form"},c={class:"form-header"},s={class:"modal-title"},u={class:"modal-close"},r=i((()=>(0,a._)("div",{class:"modal-icon modal-icon_help"},null,-1))),m={class:"form-container"},v={class:"form-item_input"},p={class:"form-group ms-small"},h={class:"form-group ms-big"},g={class:"form-group"},y={class:"form-action"},f={class:"form-action_container"},_={class:"form-action_item"},I={class:"form-action_item"},C={ref:"focusLoop",class:"focus-loop"};function b(e,t,o,i,b,N){const D=(0,a.up)("input-default"),w=(0,a.up)("base-combobox");return(0,a.wg)(),(0,a.iD)("div",n,[(0,a._)("div",d,[(0,a._)("div",c,[(0,a._)("div",s,[(0,a._)("h2",null,(0,l.zw)(i.titleForm),1)]),(0,a._)("div",u,[r,(0,a._)("div",{onClick:t[0]||(t[0]=e=>i.handleCloseModal(!1)),class:"modal-icon modal-icon_close"})])]),(0,a._)("div",m,[(0,a._)("div",v,[(0,a._)("div",p,[(0,a.Wm)(D,{focus:!0,required:!0,type:"text",maxLength:25,messageValid:i.commodityGroupNotification.validateCode,label:"Mã",class:(0,l.C_)({"is-valid":i.isValid&&""==i.commodityGroup.commodityCode}),modelValue:i.commodityGroup.commodityCode,"onUpdate:modelValue":t[1]||(t[1]=e=>i.commodityGroup.commodityCode=e),ref:"inputFocus"},null,8,["messageValid","class","modelValue"])]),(0,a._)("div",h,[(0,a.Wm)(D,{required:!0,type:"text",maxLength:80,messageValid:i.commodityGroupNotification.validateName,label:"Tên",class:(0,l.C_)({"is-valid":i.isValid&&""==i.commodityGroup.commodityName}),modelValue:i.commodityGroup.commodityName,"onUpdate:modelValue":t[2]||(t[2]=e=>i.commodityGroup.commodityName=e)},null,8,["messageValid","class","modelValue"])])]),(0,a._)("div",g,[(0,a.Wm)(w,{widthLabelCode:"150px",options:i.optionCommodityGroup,value:"commodityGroupID",header:"commodityName",label:"Thuộc",labelCode:"Mã nhóm",labelName:"Tên nhóm",headerCode:"commodityCode",modelValue:i.commodityGroup.parentID,"onUpdate:modelValue":t[3]||(t[3]=e=>i.commodityGroup.parentID=e)},null,8,["options","modelValue"])])]),(0,a._)("div",y,[(0,a._)("div",f,[(0,a._)("div",_,[(0,a._)("button",{onClick:t[4]||(t[4]=e=>i.handleSaveData(!0)),style:{"margin-right":"9px"},class:"btn modal-icon btn-form_cat"}," Cất "),(0,a._)("button",{onClick:t[5]||(t[5]=e=>i.handleSaveData(!1)),class:"btn btn-success modal-icon btn-form_cat-them"}," Cất và thêm ")]),(0,a._)("div",I,[(0,a._)("button",{onClick:t[6]||(t[6]=e=>i.handleCloseModal(!0)),class:"btn"}," Huỷ ")])])]),(0,a._)("button",C,null,512)])])}var N=o(4870),D=o(5734),w=o(5257),S=o(65),x=o(177),k=o(8410),A=o(4419),V=o(7794),T=o(2707),F=o(2325),Z={components:{InputDefault:D.Z,BaseCombobox:w.Z},props:{recordEdit:{type:Object},recordAdd:{type:Object}},setup(e,t){const{createRecordApi:o,editRecordApi:l,getAllRecordList:i,getRecordList:n}=T.Z,d=(0,N.iH)(""),{QUESTION_DATA_CHANGE:c,commodityGroupNotification:s}=k.Z,u=(0,N.iH)(null),r=(0,N.iH)(null),m=(0,N.iH)(!0),{recordEdit:v,recordAdd:p}=(0,N.BK)(e),h=(0,N.iH)(!1),g=(0,S.oR)(),{TypeSuccess:y,MessageSuccessAdd:f,MessageSuccessEdit:_,AddFormCommodityGroup:I,EditFormCommodityGroup:C}=x.Z,b=(0,N.iH)({commodityCode:"",commodityName:"",parentID:"0",isActive:!0}),D=(0,N.iH)(null),w=(0,N.iH)({commodityCode:"",commodityName:"",parentID:"0",isActive:!0}),Z=(0,N.iH)([]),{listToTree:H}=F.Z;(0,a.wF)((async()=>{await(0,V.Z)(i,null,(async e=>{Z.value=H(e,"commodityGroupID")}),g,!0),d.value=I,v.value?(d.value=C,b.value={...v.value},m.value=!1,D.value={...v.value}):(d.value=I,p.value&&(b.value={...p.value}))}));const E=function(){u.value.tagInput.focus()},{handleEventFormCtrlShiftS:L,handleEventInterruptFormCtrlShiftS:G}=A.Z;function U(e){try{L(e,J,null,O,!1,O,!0)}catch(t){console.log(t)}}function R(){return[""===b.value.commodityCode.trim()?s.validateCode:null,""===b.value.commodityName.trim()?s.validateName:null].filter((e=>{if(e)return!0}))}(0,a.bv)((()=>r.value.addEventListener("focus",E))),(0,a.bv)((()=>window.addEventListener("keydown",U))),(0,a.bv)((()=>window.addEventListener("keyup",G))),(0,a.Ah)((()=>window.removeEventListener("focus",E))),(0,a.Ah)((()=>window.removeEventListener("keydown",U))),(0,a.Ah)((()=>window.removeEventListener("keyup",G)));const M=(0,N.iH)(!1);async function W(e){b.value.parentID||(b.value={...b.value,parentID:"0"}),await(0,V.Z)(e,{...b.value},(async e=>{t.emit("handle-save-data-props",{...b.value,commodityGroupID:e}),g.dispatch("config/addNotification",{type:y,message:m.value?f:_}),M.value=!1;const o=g.state.commodityGroup.filter;await(0,V.Z)(i,null,(async e=>{Z.value=H(e,"commodityGroupID")}),g,!0),m.value||(m.value=!0),await(0,V.Z)(n,o,(async e=>{g.dispatch("commodityGroup/getRecordListAction",{recordList:H(e.recordList,"commodityGroupID"),totalCount:e.totalCount})}),g,!0)}),g,!1,(()=>{M.value=!0}))}async function O(e){try{const a=R();a.length>0?(h.value=!0,g.dispatch("config/setToggleShowNotificationErrorAction",a)):(m.value?await W(o):await W(l),!0===e&&!1===M.value?t.emit("handle-click-close-modal"):!1===M.value&&(d.value=I,h.value=!1,b.value={...w.value},u.value.tagInput.focus()))}catch(a){console.log(a)}}function q(){try{t.emit("handle-click-close-modal")}catch(e){console.log(e)}}function $(){O(!0)}function J(e){try{e?t.emit("handle-click-close-modal"):m.value?JSON.stringify(b.value)!=JSON.stringify(w.value)?j():t.emit("handle-click-close-modal"):!1===m.value&&(JSON.stringify(b.value)!=JSON.stringify(D.value)?j():t.emit("handle-click-close-modal"))}catch(o){console.log(o)}}function j(){g.dispatch("config/setToggleShowNotificationQuestionAction",{action:$,refuseAction:q,message:c})}return{inputFocus:u,commodityGroup:b,commodityGroupNotification:s,isValid:h,optionCommodityGroup:Z,focusLoop:r,titleForm:d,handleCloseModal:J,handleSaveData:O}},emits:["handle-click-close-modal","handle-save-data-props"]},H=o(89);const E=(0,H.Z)(Z,[["render",b],["__scopeId","data-v-f2d1d18e"]]);var L=E},1561:function(e,t,o){o.r(t),o.d(t,{default:function(){return L}});var a=o(3396),l=o(7139),i=o(9242);const n=e=>((0,a.dD)("data-v-29916e82"),e=e(),(0,a.Cn)(),e),d={class:"modal-body"},c={class:"form"},s={class:"form-header"},u={class:"modal-title"},r={class:"modal-close"},m=n((()=>(0,a._)("div",{class:"modal-icon modal-icon_help"},null,-1))),v={class:"form-container"},p={class:"form-item_input"},h={class:"form-group ms-small"},g={class:"form-group ms-big"},y={class:"form-group"},f=n((()=>(0,a._)("label",null,"Địa chỉ",-1))),_={class:"form-action"},I={class:"form-action_container"},C={class:"form-action_item"},b={class:"form-action_item"},N={ref:"focusLoop",class:"focus-loop"};function D(e,t,o,n,D,w){const S=(0,a.up)("input-default");return(0,a.wg)(),(0,a.iD)("div",d,[(0,a._)("div",c,[(0,a._)("div",s,[(0,a._)("div",u,[(0,a._)("h2",null,(0,l.zw)(n.titleForm),1)]),(0,a._)("div",r,[m,(0,a._)("div",{onClick:t[0]||(t[0]=e=>n.handleCloseModal(!1)),class:"modal-icon modal-icon_close"})])]),(0,a._)("div",v,[(0,a._)("div",p,[(0,a._)("div",h,[(0,a.Wm)(S,{focus:!0,required:!0,type:"text",maxLength:20,messageValid:n.depotNotification.validateCode,label:"Mã",class:(0,l.C_)({"is-valid":n.isValid&&""==n.depot.depotCode}),modelValue:n.depot.depotCode,"onUpdate:modelValue":t[1]||(t[1]=e=>n.depot.depotCode=e),ref:"inputFocus"},null,8,["messageValid","class","modelValue"])]),(0,a._)("div",g,[(0,a.Wm)(S,{required:!0,type:"text",maxLength:80,messageValid:n.depotNotification.validateName,label:"Tên",class:(0,l.C_)({"is-valid":n.isValid&&""==n.depot.depotName}),modelValue:n.depot.depotName,"onUpdate:modelValue":t[2]||(t[2]=e=>n.depot.depotName=e)},null,8,["messageValid","class","modelValue"])])]),(0,a._)("div",y,[f,(0,a.wy)((0,a._)("textarea",{class:"input","onUpdate:modelValue":t[3]||(t[3]=e=>n.depot.depotDelivery=e)},null,512),[[i.nr,n.depot.depotDelivery]])])]),(0,a._)("div",_,[(0,a._)("div",I,[(0,a._)("div",C,[(0,a._)("button",{onClick:t[4]||(t[4]=e=>n.handleSaveData(!0)),style:{"margin-right":"9px"},class:"btn modal-icon btn-form_cat"}," Cất "),(0,a._)("button",{onClick:t[5]||(t[5]=e=>n.handleSaveData(!1)),class:"btn btn-success modal-icon btn-form_cat-them"}," Cất và thêm ")]),(0,a._)("div",b,[(0,a._)("button",{onClick:t[6]||(t[6]=e=>n.handleCloseModal(!0)),tabindex:6,class:"btn"}," Huỷ ")])])]),(0,a._)("button",N,null,512)])])}var w=o(4870),S=o(5734),x=o(65),k=o(177),A=o(8410),V=o(4419),T=o(7794),F=o(9871),Z={components:{InputDefault:S.Z},props:{recordEdit:{type:Object},recordAdd:{type:Object}},setup(e,t){const{createRecordApi:o,editRecordApi:l}=F.Z,i=(0,w.iH)(""),{QUESTION_DATA_CHANGE:n,depotNotification:d}=A.Z,c=(0,w.iH)(null),s=(0,w.iH)(null),u=(0,w.iH)(!0),{recordEdit:r,recordAdd:m}=(0,w.BK)(e),v=(0,w.iH)(!1),p=(0,x.oR)(),{TypeSuccess:h,MessageSuccessAdd:g,MessageSuccessEdit:y,AddFormDepot:f,EditFormDepot:_}=k.Z,I=(0,w.iH)({depotCode:"",depotName:"",depotDelivery:"",isActive:!0}),C=(0,w.iH)(null),b=(0,w.iH)({depotCode:"",depotName:"",depotDelivery:"",isActive:!0});(0,a.wF)((async()=>{i.value=f,r.value?(i.value=_,I.value={...r.value},u.value=!1,C.value={...r.value}):(i.value=f,m.value&&(I.value={...m.value}))}));const N=function(){c.value.tagInput.focus()},{handleEventFormCtrlShiftS:D,handleEventInterruptFormCtrlShiftS:S}=V.Z;function Z(e){try{D(e,M,null,G,!1,G,!0)}catch(t){console.log(t)}}function H(){return[""===I.value.depotCode.trim()?d.validateCode:null,""===I.value.depotName.trim()?d.validateName:null].filter((e=>{if(e)return!0}))}(0,a.bv)((()=>s.value.addEventListener("focus",N))),(0,a.bv)((()=>window.addEventListener("keydown",Z))),(0,a.bv)((()=>window.addEventListener("keyup",S))),(0,a.Ah)((()=>window.removeEventListener("focus",N))),(0,a.Ah)((()=>window.removeEventListener("keydown",Z))),(0,a.Ah)((()=>window.removeEventListener("keyup",S)));const E=(0,w.iH)(!1);async function L(e){await(0,T.Z)(e,{...I.value},(async e=>{t.emit("handle-save-data-props",{...I.value,depotID:e}),p.dispatch("config/addNotification",{type:h,message:u.value?g:y}),E.value=!1,u.value?p.dispatch("depot/addRecordAction",{...I.value,depotID:e}):(u.value=!0,p.dispatch("depot/editRecordAction",{...I.value,depotID:e}))}),p,!1,(()=>{E.value=!0}))}async function G(e){try{const a=H();a.length>0?(v.value=!0,p.dispatch("config/setToggleShowNotificationErrorAction",a)):(u.value?await L(o):await L(l),!0===e&&!1===E.value?t.emit("handle-click-close-modal"):!1===E.value&&(i.value=f,v.value=!1,I.value={...b.value},c.value.tagInput.focus()))}catch(a){console.log(a)}}function U(){try{t.emit("handle-click-close-modal")}catch(e){console.log(e)}}function R(){G(!0)}function M(e){try{e?t.emit("handle-click-close-modal"):u.value?JSON.stringify(I.value)!=JSON.stringify(b.value)?W():t.emit("handle-click-close-modal"):!1===u.value&&(JSON.stringify(I.value)!=JSON.stringify(C.value)?W():t.emit("handle-click-close-modal"))}catch(o){console.log(o)}}function W(){p.dispatch("config/setToggleShowNotificationQuestionAction",{action:R,refuseAction:U,message:n})}return{inputFocus:c,depot:I,depotNotification:d,isValid:v,focusLoop:s,titleForm:i,handleCloseModal:M,handleSaveData:G}},emits:["handle-click-close-modal","handle-save-data-props"]},H=o(89);const E=(0,H.Z)(Z,[["render",D],["__scopeId","data-v-29916e82"]]);var L=E},5671:function(e,t,o){o.r(t),o.d(t,{default:function(){return Vt}});var a=o(3396),l=o(7139),i=o(9242);const n=e=>((0,a.dD)("data-v-68aeded6"),e=e(),(0,a.Cn)(),e),d={class:"form"},c={class:"form-header"},s={class:"modal-title"},u={class:"form-title"},r={key:0,class:"nature"},m=n((()=>(0,a._)("div",{class:"form-title_image form-goods"},null,-1))),v=n((()=>(0,a._)("div",{class:"form-title_header"}," Hàng hoá ",-1))),p=[m,v],h={key:1,class:"nature"},g=n((()=>(0,a._)("div",{class:"form-title_image form-service"},null,-1))),y=n((()=>(0,a._)("div",{class:"form-title_header"}," Dịch vụ ",-1))),f=[g,y],_={key:2,class:"nature"},I=n((()=>(0,a._)("div",{class:"form-title_image form-materials"},null,-1))),C=n((()=>(0,a._)("div",{class:"form-title_header"}," Nguyên vật liệu ",-1))),b=[I,C],N={key:3,class:"nature"},D=n((()=>(0,a._)("div",{class:"form-title_image form-finished-product"},null,-1))),w=n((()=>(0,a._)("div",{class:"form-title_header"}," Thành phẩm ",-1))),S=[D,w],x={key:4,class:"nature"},k=n((()=>(0,a._)("div",{class:"form-title_image form-tool-tools"},null,-1))),A=n((()=>(0,a._)("div",{class:"form-title_header"}," Công cụ dụng cụ ",-1))),V=[k,A],T={class:"modal-close"},F=n((()=>(0,a._)("div",{class:"modal-icon modal-icon_help"},null,-1))),Z={class:"form-container"},H={class:"form-detail flex-center"},E={class:"form-item form-item_left"},L={class:"form-item_input"},G={class:"form-group ms-big"},U={class:"form-item_input"},R={class:"form-group ms-small-s"},M={class:"form-group ms-big"},W={class:"form-item_input"},O={class:"form-group ms-small-s"},q={class:"form-group ms-small"},$=n((()=>(0,a._)("div",{class:"form-group ms-small info-input"},[(0,a._)("div",{class:"info-input_icon"}),(0,a._)("div",{class:"info-input_text"}," Tra cứu giảm thuế ")],-1))),J={class:"form-item"},j={class:"p-upload_image"},P={class:"image-form"},B=["src"],K={class:"image-tool"},Q=n((()=>(0,a._)("div",{class:"separate-line-upload"},null,-1))),z=n((()=>(0,a._)("div",{class:"divide-line"},null,-1))),X={class:"form-detail"},Y={class:"form-item_input"},ee={class:"form-group ms-small-s"},te={class:"form-group ms-small-s"},oe={class:"form-group ms-big"},ae={class:"form-item_input"},le={class:"form-group"},ie=n((()=>(0,a._)("label",null,"Mô tả",-1))),ne={class:"form-item_input"},de={class:"form-group"},ce={class:"form-item_input"},se={class:"form-group"},ue={class:"form-hidden"},re={class:"form-hidden_container"},me=n((()=>(0,a._)("div",{class:"form-hidden_icon"},null,-1))),ve=n((()=>(0,a._)("div",{class:"form-hidden_text"}," Thông tin ngầm định ",-1))),pe=[me,ve],he={class:"form-hidden_content-container"},ge={class:"form-item_input"},ye=n((()=>(0,a._)("div",{class:"form-group",style:{display:"none"}},null,-1))),fe={class:"form-group"},_e={class:"form-group"},Ie={class:"form-group"},Ce={class:"form-group"},be={class:"form-group"},Ne={class:"form-group"},De={class:"form-group"},we={class:"form-group"},Se={class:"form-group"},xe={class:"form-group"},ke={class:"form-group"},Ae={class:"form-group"},Ve={class:"form-group"},Te={class:"form-group"},Fe={class:"form-group"},Ze=(0,a.uE)('<div class="form-hidden_container-item" data-v-68aeded6><div class="form-hidden_item" data-v-68aeded6><div class="form-hidden_icon" data-v-68aeded6></div><div class="form-hidden_text" data-v-68aeded6> Chiết khấu bán hàng </div></div><div class="form-hidden_content" data-v-68aeded6></div></div><div class="form-hidden_container-item" data-v-68aeded6><div class="form-hidden_item" data-v-68aeded6><div class="form-hidden_icon" data-v-68aeded6></div><div class="form-hidden_text" data-v-68aeded6> Đơn vị chuyển đổi </div></div><div class="form-hidden_content" data-v-68aeded6></div></div><div class="form-hidden_container-item" data-v-68aeded6><div class="form-hidden_item" data-v-68aeded6><div class="form-hidden_icon" data-v-68aeded6></div><div class="form-hidden_text" data-v-68aeded6> Công thức tính số lượng </div></div><div class="form-hidden_content" data-v-68aeded6></div></div>',3),He={class:"form-action"},Ee={class:"form-action_container"},Le={class:"form-action_item"},Ge={class:"form-action_item"},Ue={ref:"focusLoop",class:"focus-loop"},Re={class:"form"},Me={class:"setting-header"},We=n((()=>(0,a._)("h1",null,"Chọn tính chất hàng hóa dịch vụ",-1))),Oe={class:"modal-close"},qe=n((()=>(0,a._)("div",{class:"modal-icon modal-icon_help"},null,-1))),$e={class:"setting-container"},Je=n((()=>(0,a._)("div",{class:"setting-icon"},null,-1))),je=n((()=>(0,a._)("div",{class:"setting-text"},[(0,a._)("div",{class:"setting-text_title"},"Hàng hoá"),(0,a._)("div",{class:"setting-text_content"},"Sản phẩm bạn mua và bán lại cho khách hàng")],-1))),Pe=[Je,je],Be=n((()=>(0,a._)("div",{class:"setting-icon"},null,-1))),Ke=n((()=>(0,a._)("div",{class:"setting-text"},[(0,a._)("div",{class:"setting-text_title"},"Dịch vụ"),(0,a._)("div",{class:"setting-text_content"},"Dịch vụ mà bạn cung cấp cho khách hàng")],-1))),Qe=[Be,Ke],ze=n((()=>(0,a._)("div",{class:"setting-icon"},null,-1))),Xe=n((()=>(0,a._)("div",{class:"setting-text"},[(0,a._)("div",{class:"setting-text_title"},"Nguyên vật liệu"),(0,a._)("div",{class:"setting-text_content"},"Nguyên liệu đầu vào dùng cho hoạt động sản xuất, xây dựng, cung cấp dịch vụ")],-1))),Ye=[ze,Xe],et=n((()=>(0,a._)("div",{class:"setting-icon"},null,-1))),tt=n((()=>(0,a._)("div",{class:"setting-text"},[(0,a._)("div",{class:"setting-text_title"},"Thành phẩm"),(0,a._)("div",{class:"setting-text_content"},"Là sản phẩm đầu ra của quá trình sản xuất")],-1))),ot=[et,tt],at=n((()=>(0,a._)("div",{class:"setting-icon"},null,-1))),lt=n((()=>(0,a._)("div",{class:"setting-text"},[(0,a._)("div",{class:"setting-text_title"},"Công cụ dụng cụ"),(0,a._)("div",{class:"setting-text_content"},"Công cụ dụng cụ mua về nhập kho chưa đưa vào sử dụng")],-1))),it=[at,lt],nt=n((()=>(0,a._)("div",{class:"resize-icon"},null,-1))),dt=[nt];function ct(e,t,o,n,m,v){const g=(0,a.up)("input-default"),y=(0,a.up)("input-combobox"),I=(0,a.up)("form-unit"),C=(0,a.up)("modal-form"),D=(0,a.up)("form-inventory-item-category"),w=(0,a.up)("form-depot");return(0,a.wg)(),(0,a.iD)("div",{class:(0,l.C_)(["modal-body",{active:n.isShowFullModal}])},[(0,a.wy)((0,a._)("div",d,[(0,a._)("div",c,[(0,a._)("div",s,[(0,a._)("h2",null,(0,l.zw)(n.titleForm),1),(0,a._)("div",u,[o.typeNature===n.eNum.Goods?((0,a.wg)(),(0,a.iD)("div",r,p)):(0,a.kq)("",!0),o.typeNature===n.eNum.Service?((0,a.wg)(),(0,a.iD)("div",h,f)):(0,a.kq)("",!0),o.typeNature===n.eNum.Materials?((0,a.wg)(),(0,a.iD)("div",_,b)):(0,a.kq)("",!0),o.typeNature===n.eNum.FinishedProduct?((0,a.wg)(),(0,a.iD)("div",N,S)):(0,a.kq)("",!0),o.typeNature===n.eNum.ToolTools?((0,a.wg)(),(0,a.iD)("div",x,V)):(0,a.kq)("",!0),(0,a._)("div",{onClick:t[0]||(t[0]=e=>n.handleSelectNature(!1)),class:"form-title_link"}," Thay đổi tính chất ")])]),(0,a._)("div",T,[F,(0,a._)("div",{onClick:t[1]||(t[1]=e=>n.handleCloseModal(!1)),class:"modal-icon modal-icon_close"})])]),(0,a._)("div",Z,[(0,a._)("div",H,[(0,a._)("div",E,[(0,a._)("div",L,[(0,a._)("div",G,[(0,a.Wm)(g,{ref:"inputFocus",required:!0,focus:!0,type:"text",maxLength:255,label:"Tên",modelValue:n.inventoryItem.inventoryItemName,"onUpdate:modelValue":t[2]||(t[2]=e=>n.inventoryItem.inventoryItemName=e),messageValid:n.inventoryItemNotification.validateName,class:(0,l.C_)({"is-valid":n.isValid&&""==n.inventoryItem.inventoryItemName})},null,8,["modelValue","messageValid","class"])])]),(0,a._)("div",U,[(0,a._)("div",R,[(0,a.Wm)(g,{required:!0,type:"text",maxLength:25,label:"Mã",leftMessage:"95%",modelValue:n.inventoryItem.inventoryItemCode,"onUpdate:modelValue":t[3]||(t[3]=e=>n.inventoryItem.inventoryItemCode=e),messageValid:n.inventoryItemNotification.validateCode,class:(0,l.C_)({"is-valid":n.isValid&&""==n.inventoryItem.inventoryItemCode})},null,8,["modelValue","messageValid","class"])]),(0,a._)("div",M,[(0,a.Wm)(y,{options:n.optionCommodityGroup,widthOptionSelect:"600px",widthLabelCode:"250px",value:"commodityGroupID",header:"commodityName",labelCode:"Mã nhóm vật tư hàng hoá, dịch vụ",labelName:"Tên nhóm vật tư hàng hoá, dịch vụ",headerCode:"commodityCode",label:"Nhóm VTHH",toolTip:"Nhóm vật tư hàng hoá",selectMultiple:!0,headerSelectMultiple:"commodityCode",modelValue:n.commodityGroupID,"onUpdate:modelValue":t[4]||(t[4]=e=>n.commodityGroupID=e),addIcon:!0,handleAddIcon:n.handleToggleFormInventoryItemCategory},null,8,["options","modelValue","handleAddIcon"])])]),(0,a._)("div",W,[(0,a._)("div",O,[(0,a.Wm)(y,{options:n.optionUnit,value:"unitCalculationID",header:"unitCalculationName",label:"Đơn vị tính chính",modelValue:n.inventoryItem.unitCalculationID,"onUpdate:modelValue":t[5]||(t[5]=e=>n.inventoryItem.unitCalculationID=e),textField:n.inventoryItem.unitCalculationName,"onUpdate:textField":t[6]||(t[6]=e=>n.inventoryItem.unitCalculationName=e),leftMessage:"90%",addIcon:!0,handleAddIcon:n.handleToggleFormUnit},null,8,["options","modelValue","textField","handleAddIcon"])]),(0,a._)("div",q,[(0,a.Wm)(y,{options:[{value:"Chưa xác định",header:"Chưa xác định"},{value:"Không giảm thuế",header:"Không giảm thuế"},{value:"Có giảm thuế",header:"Có giảm thuế"}],value:"value",header:"header",label:"Giảm thuế theo NQ43",toolTip:"Trạng thái tra cứu giảm thuế theo nghị quyết 43/2022/QH15",disabled:!0,modelValue:n.inventoryItem.depreciatedTax,"onUpdate:modelValue":t[7]||(t[7]=e=>n.inventoryItem.depreciatedTax=e)},null,8,["modelValue"])]),$])]),(0,a._)("div",J,[(0,a._)("div",j,[(0,a._)("div",P,[""!==n.inventoryItem.avatar&&n.inventoryItem.avatar?((0,a.wg)(),(0,a.iD)("img",{key:0,onClick:t[8]||(t[8]=t=>e.$refs.v_image.click()),class:"image-form-style",src:n.inventoryItem.avatar.includes("/Assets/Images/")?n.baseUrl.baseUrlImage+n.inventoryItem.avatar:n.inventoryItem.avatar,alt:""},null,8,B)):(0,a.kq)("",!0),(0,a._)("div",{onClick:t[9]||(t[9]=t=>e.$refs.v_image.click()),class:"upload-image"})]),(0,a._)("div",K,[(0,a._)("div",{onClick:t[10]||(t[10]=t=>e.$refs.v_image.click()),class:"image-tool_item tool-edit"}),Q,(0,a._)("input",{accept:"image/*",onChange:t[11]||(t[11]=(...e)=>n.onFileSelected&&n.onFileSelected(...e)),ref:"v_image",class:"separate-line-chose_image",type:"file"},null,544),(0,a._)("div",{onClick:t[12]||(t[12]=t=>{n.inventoryItem.avatar="",e.$refs.v_image.value=""}),class:"image-tool_item tool-delete"})])])])]),z,(0,a._)("div",X,[(0,a.wy)((0,a._)("div",Y,[(0,a._)("div",ee,[(0,a.Wm)(y,{options:[{value:"1 tháng",header:"1 tháng"},{value:"2 tháng",header:"2 tháng"},{value:"3 tháng",header:"3 tháng"},{value:"6 tháng",header:"6 tháng"},{value:"9 tháng",header:"9 tháng"},{value:"1 năm",header:"1 năm"},{value:"2 năm",header:"2 năm"},{value:"3 năm",header:"3 năm"},{value:"6 năm",header:"6 năm"},{value:"9 năm",header:"9 năm"},{value:"12 năm",header:"12 năm"}],value:"value",header:"header",label:"Thời hạn bảo hành",modelValue:n.inventoryItem.warrantyPeriod,"onUpdate:modelValue":t[13]||(t[13]=e=>n.inventoryItem.warrantyPeriod=e)},null,8,["modelValue"])]),(0,a._)("div",te,[(0,a.Wm)(g,{type:"text",label:"Số lượng tồn tối thiểu",isNumber:!0,modelValue:n.inventoryItem.minimumStock,"onUpdate:modelValue":t[14]||(t[14]=e=>n.inventoryItem.minimumStock=e),modelModifiers:{number:!0}},null,8,["modelValue"])]),(0,a._)("div",oe,[(0,a.Wm)(g,{type:"text",label:"Nguồn gốc",maxLength:255,modelValue:n.inventoryItem.origin,"onUpdate:modelValue":t[15]||(t[15]=e=>n.inventoryItem.origin=e)},null,8,["modelValue"])])],512),[[i.F8,o.typeNature!==n.eNum.Service]]),(0,a.wy)((0,a._)("div",ae,[(0,a._)("div",le,[ie,(0,a.wy)((0,a._)("textarea",{class:"input","onUpdate:modelValue":t[16]||(t[16]=e=>n.inventoryItem.description=e)},null,512),[[i.nr,n.inventoryItem.description]])])],512),[[i.F8,o.typeNature!==n.eNum.Service]]),(0,a._)("div",ne,[(0,a._)("div",de,[(0,a.Wm)(g,{type:"text",label:"Diễn giải khi mua",modelValue:n.inventoryItem.explanationBuy,"onUpdate:modelValue":t[17]||(t[17]=e=>n.inventoryItem.explanationBuy=e)},null,8,["modelValue"])])]),(0,a._)("div",ce,[(0,a._)("div",se,[(0,a.Wm)(g,{type:"text",label:"Diễn giải khi bán",modelValue:n.inventoryItem.explanationSell,"onUpdate:modelValue":t[18]||(t[18]=e=>n.inventoryItem.explanationSell=e)},null,8,["modelValue"])])])]),(0,a._)("div",ue,[(0,a._)("div",re,[(0,a._)("div",{class:(0,l.C_)(["form-hidden_container-item",{active:n.isShowFormHidden}])},[(0,a._)("div",{onClick:t[19]||(t[19]=(...e)=>n.handleToggleShowFormHidden&&n.handleToggleShowFormHidden(...e)),class:"form-hidden_item"},pe),(0,a._)("div",{class:(0,l.C_)(["form-hidden_content",{"active-service":o.typeNature===n.eNum.Service}])},[(0,a.wy)((0,a._)("div",he,[(0,a._)("div",ge,[ye,(0,a.wy)((0,a._)("div",fe,[(0,a.Wm)(y,{widthLabelCode:"170px",widthOptionSelect:"450px",options:n.optionDepot,value:"depotID",header:"depotName",label:"Kho ngầm định",labelCode:"Mã kho",labelName:"Tên kho",headerCode:"depotCode",modelValue:n.inventoryItem.depotID,"onUpdate:modelValue":t[20]||(t[20]=e=>n.inventoryItem.depotID=e),textField:n.inventoryItem.depotName,"onUpdate:textField":t[21]||(t[21]=e=>n.inventoryItem.depotName=e),addIcon:!0,handleAddIcon:n.handleToggleFormDepot},null,8,["options","modelValue","textField","handleAddIcon"])],512),[[i.F8,o.typeNature!==n.eNum.Service]]),(0,a._)("div",_e,[(0,a.Wm)(g,{type:"text",maxLength:80,label:"Tài khoản giảm giá",modelValue:n.inventoryItem.accountSale,"onUpdate:modelValue":t[22]||(t[22]=e=>n.inventoryItem.accountSale=e)},null,8,["modelValue"])]),(0,a._)("div",Ie,[(0,a.Wm)(g,{type:"text",label:"Đơn mua cố định",isNumber:!0,modelValue:n.inventoryItem.orderFix,"onUpdate:modelValue":t[23]||(t[23]=e=>n.inventoryItem.orderFix=e),modelModifiers:{number:!0}},null,8,["modelValue"])]),(0,a._)("div",Ce,[(0,a.Wm)(g,{type:"text",label:"Thuế suất GTGT (%)",toolTip:"Thuế giá trị gia tăng",isNumber:!0,maxValue:100,modelValue:n.inventoryItem.vatTax,"onUpdate:modelValue":t[24]||(t[24]=e=>n.inventoryItem.vatTax=e),modelModifiers:{number:!0}},null,8,["label","modelValue"])]),(0,a.wy)((0,a._)("div",be,[(0,a.Wm)(g,{type:"text",maxLength:80,label:"Tài khoản kho",modelValue:n.inventoryItem.accountDepot,"onUpdate:modelValue":t[25]||(t[25]=e=>n.inventoryItem.accountDepot=e)},null,8,["modelValue"])],512),[[i.F8,o.typeNature!==n.eNum.Service]]),(0,a._)("div",Ne,[(0,a.Wm)(g,{type:"text",label:"Tài khoản trả lại",maxLength:80,modelValue:n.inventoryItem.accountReturn,"onUpdate:modelValue":t[26]||(t[26]=e=>n.inventoryItem.accountReturn=e)},null,8,["modelValue"])]),(0,a._)("div",De,[(0,a.Wm)(g,{type:"text",label:"Đơn mua giá gần nhất",isNumber:!0,modelValue:n.inventoryItem.orderNearest,"onUpdate:modelValue":t[27]||(t[27]=e=>n.inventoryItem.orderNearest=e),modelModifiers:{number:!0}},null,8,["modelValue"])]),(0,a.wy)((0,a._)("div",we,[(0,a.Wm)(g,{type:"text",label:"Thuế suất thuế NK (%)",toolTip:"Thuế suất thuế nhập khẩu",isNumber:!0,maxValue:100,modelValue:n.inventoryItem.vatImport,"onUpdate:modelValue":t[28]||(t[28]=e=>n.inventoryItem.vatImport=e),modelModifiers:{number:!0}},null,8,["label","modelValue"])],512),[[i.F8,o.typeNature!==n.eNum.Service]]),(0,a._)("div",Se,[(0,a.Wm)(g,{type:"text",maxLength:80,label:"Tài khoản doanh thu",modelValue:n.inventoryItem.accountRevenue,"onUpdate:modelValue":t[29]||(t[29]=e=>n.inventoryItem.accountRevenue=e)},null,8,["modelValue"])]),(0,a._)("div",xe,[(0,a.Wm)(g,{type:"text",label:"Tài khoản chi phí",maxLength:80,modelValue:n.inventoryItem.accountCost,"onUpdate:modelValue":t[30]||(t[30]=e=>n.inventoryItem.accountCost=e)},null,8,["modelValue"])]),(0,a._)("div",ke,[(0,a.Wm)(g,{type:"text",label:"Đơn giá bán",isNumber:!0,modelValue:n.inventoryItem.orderSell,"onUpdate:modelValue":t[31]||(t[31]=e=>n.inventoryItem.orderSell=e),modelModifiers:{number:!0}},null,8,["modelValue"])]),(0,a.wy)((0,a._)("div",Ae,[(0,a.Wm)(g,{type:"text",label:"Thuế suất thuế XK (%)",toolTip:"Thuế suất thuế suất khẩu",isNumber:!0,maxValue:100,modelValue:n.inventoryItem.vatExport,"onUpdate:modelValue":t[32]||(t[32]=e=>n.inventoryItem.vatExport=e),modelModifiers:{number:!0}},null,8,["label","modelValue"])],512),[[i.F8,o.typeNature!==n.eNum.Service]]),(0,a._)("div",Ve,[(0,a.Wm)(g,{type:"text",maxLength:80,label:"Tài khoản chiết khấu",modelValue:n.inventoryItem.accountDiscount,"onUpdate:modelValue":t[33]||(t[33]=e=>n.inventoryItem.accountDiscount=e)},null,8,["modelValue"])]),(0,a._)("div",Te,[(0,a.Wm)(g,{type:"text",label:"Tỉ lệ CKMH (%)",toolTip:"Tỉ lệ chiết khấu mua hàng",isNumber:!0,maxValue:100,modelValue:n.inventoryItem.ratioDiscount,"onUpdate:modelValue":t[34]||(t[34]=e=>n.inventoryItem.ratioDiscount=e),modelModifiers:{number:!0}},null,8,["label","modelValue"])]),(0,a._)("div",Fe,[(0,a.Wm)(g,{type:"text",label:"Nhóm HHDV chịu thuế TTĐB",toolTip:"Nhóm hàng hoá dịch vụ chịu thuế tiêu thụ đặc biệt",modelValue:n.inventoryItem.vatGroupExciceTax,"onUpdate:modelValue":t[35]||(t[35]=e=>n.inventoryItem.vatGroupExciceTax=e)},null,8,["modelValue"])])])],512),[[i.F8,n.isShowFormHidden]])],2)],2),Ze])])]),(0,a._)("div",He,[(0,a._)("div",Ee,[(0,a._)("div",Le,[(0,a._)("button",{onClick:t[36]||(t[36]=e=>n.handleSaveData(!0)),style:{"margin-right":"9px"},class:"btn modal-icon btn-form_cat up"}," Cất "),(0,a._)("button",{onClick:t[37]||(t[37]=e=>n.handleSaveData(!1)),class:"btn btn-success modal-icon btn-form_cat-them up"}," Cất và thêm ")]),(0,a._)("div",Ge,[(0,a._)("button",{onClick:t[38]||(t[38]=e=>n.handleCloseModal(!0)),class:"btn"}," Huỷ ")])])]),(0,a._)("button",Ue,null,512)],512),[[i.F8,n.isShowFormMain]]),(0,a.wy)((0,a._)("div",Re,[(0,a._)("div",Me,[We,(0,a._)("div",Oe,[qe,(0,a._)("div",{onClick:t[39]||(t[39]=e=>n.handleCloseModal(!0)),class:"modal-icon modal-icon_close"})])]),(0,a._)("div",$e,[(0,a._)("div",{onClick:t[40]||(t[40]=e=>n.handleSelectNature(n.eNum.Goods)),class:"setting-item item-goods"},Pe),(0,a._)("div",{onClick:t[41]||(t[41]=e=>n.handleSelectNature(n.eNum.Service)),class:"setting-item item-service"},Qe),(0,a._)("div",{onClick:t[42]||(t[42]=e=>n.handleSelectNature(n.eNum.Materials)),class:"setting-item item-materials"},Ye),(0,a._)("div",{onClick:t[43]||(t[43]=e=>n.handleSelectNature(n.eNum.FinishedProduct)),class:"setting-item item-finished-product"},ot),(0,a._)("div",{onClick:t[44]||(t[44]=e=>n.handleSelectNature(n.eNum.ToolTools)),class:"setting-item item-tool-tools"},it)])],512),[[i.F8,!n.isShowFormMain]]),(0,a._)("div",{onClick:t[45]||(t[45]=()=>{n.isShowFullModal=!n.isShowFullModal}),class:"resize"},dt),((0,a.wg)(),(0,a.j4)(a.lR,{to:"#app"},[n.isShowFormUnit?((0,a.wg)(),(0,a.j4)(C,{key:0},{default:(0,a.w5)((()=>[(0,a.Wm)(I,{onHandleClickCloseModal:n.handleToggleFormUnit,onHandleSaveDataProps:n.handleSaveDataUnit},null,8,["onHandleClickCloseModal","onHandleSaveDataProps"])])),_:1})):(0,a.kq)("",!0),n.isShowFormInventoryItemCategory?((0,a.wg)(),(0,a.j4)(C,{key:1},{default:(0,a.w5)((()=>[(0,a.Wm)(D,{onHandleClickCloseModal:n.handleToggleFormInventoryItemCategory,onHandleSaveDataProps:n.handleSaveDataInventoryItemCategory},null,8,["onHandleClickCloseModal","onHandleSaveDataProps"])])),_:1})):(0,a.kq)("",!0),n.isShowFormDepot?((0,a.wg)(),(0,a.j4)(C,{key:2},{default:(0,a.w5)((()=>[(0,a.Wm)(w,{onHandleClickCloseModal:n.handleToggleFormDepot,onHandleSaveDataProps:n.handleSaveDataDepot},null,8,["onHandleClickCloseModal","onHandleSaveDataProps"])])),_:1})):(0,a.kq)("",!0)]))],2)}var st=o(4870),ut=o(5734),rt=o(5257),mt=o(65),vt=o(177),pt=o(8410),ht=o(2325),gt=o(4419),yt=o(7794),ft=o(5575),_t=o(7923),It=o(2707),Ct=o(9871),bt=o(3578),Nt=o(1561),Dt=o(8781),wt=o(8334),St=o(6730),xt={components:{InputDefault:ut.Z,InputCombobox:rt.Z,FormUnit:bt["default"],ModalForm:wt.Z,FormInventoryItemCategory:Dt["default"],FormDepot:Nt["default"]},props:{recordEdit:{type:Object},recordAdd:{type:Object},typeNature:{type:Number}},setup(e,t){const{recordEdit:o,recordAdd:l,typeNature:i}=(0,st.BK)(e),{nextValue:n,createRecordApi:d,editRecordApi:c}=ft.Z,s=(0,st.iH)(!1);function u(e){try{!1===e?s.value=!1:(t.emit("handle-change-type-nature",e),U.value.nature=e,M.value.nature=e,s.value=!0,setTimeout((()=>{S.value.tagInput.focus()}),50))}catch(o){console.log(o)}}const r=(0,st.iH)(!1);function m(e){try{W.value=[e,...W.value],U.value.unitCalculationID=e.unitCalculationID}catch(t){console.log(t)}}function v(){r.value=!r.value}const p=(0,st.iH)(!1);function h(e){try{O.value=$([e,...O.value],"commodityGroupID"),L.value.push(e.commodityGroupID)}catch(t){console.log(t)}}function g(){p.value=!p.value}const y=(0,st.iH)(!1);function f(e){try{q.value=[e,...q.value],U.value.depotID=e.depotID}catch(t){console.log(t)}}function _(){y.value=!y.value}const I=(0,st.iH)(!1),C=(0,st.iH)(!1);function b(){C.value=!C.value}const N=(0,st.iH)(""),{QUESTION_DATA_CHANGE:D,inventoryItemNotification:w}=pt.Z,S=(0,st.iH)(null),x=(0,st.iH)(null),k=(0,st.iH)(!0),A=(0,st.iH)(!1),V=(0,mt.oR)(),{TypeSuccess:T,MessageSuccessAdd:F,MessageSuccessEdit:Z,AddFormInventoryItem:H,EditFormInventoryItem:E}=vt.Z,L=(0,st.iH)([]);function G(e){try{let t=e.target.files[0],o=new FileReader;o.readAsDataURL(t),o.onload=e=>{U.value.avatar=e.target.result}}catch{return}}const U=(0,st.iH)({unitCalculationID:"",commodityCode:"",commodityGroupID:"",avatar:"",depotID:"",inventoryItemCode:"",inventoryItemName:"",nature:vt.Z.Goods,depreciatedTax:"Chưa xác định",warrantyPeriod:"",minimumStock:"",origin:"",description:"",explanationBuy:"",explanationSell:"",accountDepot:"",accountRevenue:"",accountDiscount:"",accountSale:"",accountReturn:"",accountCost:"",ratioDiscount:"",vatTax:"",vatImport:"",vatExport:"",vatGroupExciceTax:"",orderFix:"",orderNearest:"",orderSell:"",isActive:!0}),R=(0,st.iH)(null),M=(0,st.iH)({unitCalculationID:"",commodityCode:"",commodityGroupID:"",avatar:"",depotID:"",inventoryItemCode:"",inventoryItemName:"",nature:vt.Z.Goods,depreciatedTax:"Chưa xác định",warrantyPeriod:"",minimumStock:"",origin:"",description:"",explanationBuy:"",explanationSell:"",accountDepot:"",accountRevenue:"",accountDiscount:"",accountSale:"",accountReturn:"",accountCost:"",ratioDiscount:"",vatTax:"",vatImport:"",vatExport:"",vatGroupExciceTax:"",orderFix:"",orderNearest:"",orderSell:"",isActive:!0}),W=(0,st.iH)([]),O=(0,st.iH)([]),q=(0,st.iH)([]),{listToTree:$}=ht.Z;(0,a.wF)((async()=>{(o.value||l.value||i.value)&&(s.value=!0,o.value?await t.emit("handle-change-type-nature",o.value.nature):l.value&&await t.emit("handle-change-type-nature",l.value.nature)),N.value=H,await(0,yt.Z)(_t.Z.getAllRecordListActive,null,(async e=>{W.value=e}),V,!0),await(0,yt.Z)(It.Z.getAllRecordList,null,(async e=>{O.value=$(e,"commodityGroupID")}),V,!0),await(0,yt.Z)(Ct.Z.getAllRecordListActive,null,(async e=>{q.value=e}),V,!0),o.value?(N.value=E,k.value=!1,U.value=o.value,R.value=o.value,L.value=U.value.commodityGroupID?U.value.commodityGroupID.split(";"):[]):(N.value=H,l.value&&(U.value={...l.value},L.value=U.value.commodityGroupID?U.value.commodityGroupID.split(";"):[]),await(0,yt.Z)(n,null,(e=>{U.value.inventoryItemCode=e,M.value.inventoryItemCode=e}),V,!0))}));const J=function(){S.value.tagInput.focus()},{handleEventFormCtrlShiftS:j,handleEventInterruptFormCtrlShiftS:P}=gt.Z;function B(e){try{r.value||p.value||y.value||j(e,ae,null,ee,!1,ee,!0)}catch(t){console.log(t)}}function K(){return[""===U.value.inventoryItemCode.trim()?w.validateCode:null,""===U.value.inventoryItemName.trim()?w.validateName:null].filter((e=>{if(e)return!0}))}(0,a.bv)((()=>{x.value.addEventListener("focus",J),window.addEventListener("keydown",B),window.addEventListener("keyup",P)})),(0,a.Ah)((()=>{window.removeEventListener("focus",J),window.removeEventListener("keydown",B),window.removeEventListener("keyup",P)}));const Q=(0,st.iH)(!1),z=(0,st.iH)(null);function X(){i.value===vt.Z.Service&&(U.value.warrantyPeriod="",U.value.minimumStock="",U.value.origin="",U.value.description="",U.value.depotID="",U.value.depotName="",U.value.accountDepot="",U.value.vatImport="",U.value.vatExport=""),U.value.commodityGroupID=L.value.join(";"),U.value.commodityCode=O.value.filter((e=>L.value.includes(e.commodityGroupID))).reduce(((e,t)=>[...e,t.commodityCode]),[]).join(";")}async function Y(e){X();let t={};Object.keys(U.value).forEach((e=>{(0===U.value[e]||""!==U.value[e]&&U.value[e])&&(t={...t,[e]:U.value[e]})})),await(0,yt.Z)(e,t,(async e=>{V.dispatch("config/addNotification",{type:T,message:k.value?F:Z}),Q.value=!1,k.value?V.dispatch("inventoryItem/addRecordAction",{...U.value,inventoryItemID:e}):(k.value=!0,V.dispatch("inventoryItem/editRecordAction",{...U.value,inventoryItemID:e}))}),V,!1,(()=>{Q.value=!0}))}async function ee(e){try{const o=K();o.length>0?(A.value=!0,V.dispatch("config/setToggleShowNotificationErrorAction",o)):(k.value?await Y(d):await Y(c),!0===e&&!1===Q.value?t.emit("handle-click-close-modal"):!1===Q.value&&(N.value=H,A.value=!1,U.value={...M.value},z.value.value="",await(0,yt.Z)(n,null,(e=>{U.value.inventoryItemCode=e}),V,!0),S.value.tagInput.focus()))}catch(o){console.log(o)}}function te(){try{t.emit("handle-click-close-modal")}catch(e){console.log(e)}}function oe(){ee(!0)}function ae(e){try{e?t.emit("handle-click-close-modal"):k.value?JSON.stringify(U.value)!=JSON.stringify(M.value)?le():t.emit("handle-click-close-modal"):!1===k.value&&(JSON.stringify(U.value)!=JSON.stringify(R.value)?le():t.emit("handle-click-close-modal"))}catch(o){console.log(o)}}function le(){V.dispatch("config/setToggleShowNotificationQuestionAction",{action:oe,refuseAction:te,message:D})}return{eNum:vt.Z,inputFocus:S,v_image:z,baseUrl:St.Z,isShowFullModal:I,commodityGroupID:L,inventoryItemNotification:w,isShowFormHidden:C,isShowFormUnit:r,isShowFormMain:s,isValid:A,focusLoop:x,titleForm:N,optionUnit:W,optionCommodityGroup:O,optionDepot:q,inventoryItem:U,isShowFormInventoryItemCategory:p,isShowFormDepot:y,onFileSelected:G,handleSelectNature:u,handleCloseModal:ae,handleSaveData:ee,handleToggleShowFormHidden:b,handleToggleFormUnit:v,handleSaveDataUnit:m,handleToggleFormInventoryItemCategory:g,handleSaveDataInventoryItemCategory:h,handleToggleFormDepot:_,handleSaveDataDepot:f}},emits:["handle-click-close-modal","handle-change-type-nature"]},kt=o(89);const At=(0,kt.Z)(xt,[["render",ct],["__scopeId","data-v-68aeded6"]]);var Vt=At},3578:function(e,t,o){o.r(t),o.d(t,{default:function(){return H}});var a=o(3396),l=o(7139),i=o(9242);const n=e=>((0,a.dD)("data-v-58e89368"),e=e(),(0,a.Cn)(),e),d={class:"modal-body"},c={class:"form"},s={class:"form-header"},u={class:"modal-title"},r={class:"modal-close"},m=n((()=>(0,a._)("div",{class:"modal-icon modal-icon_help"},null,-1))),v={class:"form-container"},p={class:"form-group ms-small"},h={class:"form-group"},g=n((()=>(0,a._)("label",null,"Mô tả",-1))),y={class:"form-action"},f={class:"form-action_container"},_={class:"form-action_item"},I={class:"form-action_item"},C={ref:"focusLoop",class:"focus-loop"};function b(e,t,o,n,b,N){const D=(0,a.up)("input-default");return(0,a.wg)(),(0,a.iD)("div",d,[(0,a._)("div",c,[(0,a._)("div",s,[(0,a._)("div",u,[(0,a._)("h2",null,(0,l.zw)(n.titleForm),1)]),(0,a._)("div",r,[m,(0,a._)("div",{onClick:t[0]||(t[0]=e=>n.handleCloseModal(!1)),class:"modal-icon modal-icon_close"})])]),(0,a._)("div",v,[(0,a._)("div",p,[(0,a.Wm)(D,{focus:!0,required:!0,type:"text",maxLength:100,messageValid:n.unitCalculationNotification.validateName,label:"Đơn vị tính",class:(0,l.C_)({"is-valid":n.isValid&&""==n.unitCalculation.unitCalculationName}),modelValue:n.unitCalculation.unitCalculationName,"onUpdate:modelValue":t[1]||(t[1]=e=>n.unitCalculation.unitCalculationName=e),ref:"inputFocus"},null,8,["messageValid","class","modelValue"])]),(0,a._)("div",h,[g,(0,a.wy)((0,a._)("textarea",{class:"input","onUpdate:modelValue":t[2]||(t[2]=e=>n.unitCalculation.unitCalculationDetail=e)},null,512),[[i.nr,n.unitCalculation.unitCalculationDetail]])])]),(0,a._)("div",y,[(0,a._)("div",f,[(0,a._)("div",_,[(0,a._)("button",{onClick:t[3]||(t[3]=e=>n.handleSaveData(!0)),style:{"margin-right":"9px"},class:"btn modal-icon btn-form_cat"}," Cất "),(0,a._)("button",{onClick:t[4]||(t[4]=e=>n.handleSaveData(!1)),class:"btn btn-success modal-icon btn-form_cat-them"}," Cất và thêm ")]),(0,a._)("div",I,[(0,a._)("button",{onClick:t[5]||(t[5]=e=>n.handleCloseModal(!0)),class:"btn"}," Huỷ ")])])]),(0,a._)("button",C,null,512)])])}var N=o(4870),D=o(5734),w=o(65),S=o(177),x=o(8410),k=o(4419),A=o(7794),V=o(7923),T={components:{InputDefault:D.Z},props:{recordEdit:{type:Object},recordAdd:{type:Object}},setup(e,t){const{createRecordApi:o,editRecordApi:l}=V.Z,i=(0,N.iH)(""),{QUESTION_DATA_CHANGE:n,unitCalculationNotification:d}=x.Z,c=(0,N.iH)(null),s=(0,N.iH)(null),u=(0,N.iH)(!0),{recordEdit:r,recordAdd:m}=(0,N.BK)(e),v=(0,N.iH)(!1),p=(0,w.oR)(),{TypeSuccess:h,MessageSuccessAdd:g,MessageSuccessEdit:y,AddFormUnit:f,EditFormUnit:_}=S.Z,I=(0,N.iH)({unitCalculationName:"",unitCalculationDetail:"",isActive:!0}),C=(0,N.iH)(null),b=(0,N.iH)({unitCalculationName:"",unitCalculationDetail:"",isActive:!0});(0,a.wF)((async()=>{i.value=f,r.value?(i.value=_,I.value={...r.value},u.value=!1,C.value={...r.value}):(i.value=f,m.value&&(I.value={...m.value}))}));const D=function(){c.value.tagInput.focus()},{handleEventFormCtrlShiftS:T,handleEventInterruptFormCtrlShiftS:F}=k.Z;function Z(e){try{T(e,M,null,G,!1,G,!0)}catch(t){console.log(t)}}function H(){return[""===I.value.unitCalculationName.trim()?d.validateName:null].filter((e=>{if(e)return!0}))}(0,a.bv)((()=>s.value.addEventListener("focus",D))),(0,a.bv)((()=>window.addEventListener("keydown",Z))),(0,a.bv)((()=>window.addEventListener("keyup",F))),(0,a.Ah)((()=>window.removeEventListener("focus",D))),(0,a.Ah)((()=>window.removeEventListener("keydown",Z))),(0,a.Ah)((()=>window.removeEventListener("keyup",F)));const E=(0,N.iH)(!1);async function L(e){await(0,A.Z)(e,{...I.value},(async e=>{t.emit("handle-save-data-props",{...I.value,unitCalculationID:e}),p.dispatch("config/addNotification",{type:h,message:u.value?g:y}),E.value=!1,u.value?p.dispatch("unitCalculation/addRecordAction",{...I.value,unitCalculationID:e}):(u.value=!0,p.dispatch("unitCalculation/editRecordAction",{...I.value,unitCalculationID:e}))}),p,!1,(()=>{E.value=!0}))}async function G(e){try{const a=H();a.length>0?(v.value=!0,p.dispatch("config/setToggleShowNotificationErrorAction",a)):(u.value?await L(o):await L(l),!0===e&&!1===E.value?t.emit("handle-click-close-modal"):!1===E.value&&(i.value=f,v.value=!1,I.value={...b.value},c.value.tagInput.focus()))}catch(a){console.log(a)}}function U(){try{t.emit("handle-click-close-modal")}catch(e){console.log(e)}}function R(){try{G(!0)}catch(e){console.log(e)}}function M(e){try{e?t.emit("handle-click-close-modal"):u.value?JSON.stringify(I.value)!=JSON.stringify(b.value)?W():t.emit("handle-click-close-modal"):!1===u.value&&(JSON.stringify(I.value)!=JSON.stringify(C.value)?W():t.emit("handle-click-close-modal"))}catch(o){console.log(o)}}function W(){p.dispatch("config/setToggleShowNotificationQuestionAction",{action:R,refuseAction:U,message:n})}return{inputFocus:c,unitCalculation:I,unitCalculationNotification:d,isValid:v,focusLoop:s,titleForm:i,handleCloseModal:M,handleSaveData:G}},emits:["handle-click-close-modal","handle-save-data-props"]},F=o(89);const Z=(0,F.Z)(T,[["render",b],["__scopeId","data-v-58e89368"]]);var H=Z}}]);
//# sourceMappingURL=671.471eb486.js.map