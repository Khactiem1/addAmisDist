"use strict";(self["webpackChunkquanlynhanvien_amis_ketoan"]=self["webpackChunkquanlynhanvien_amis_ketoan"]||[]).push([[561],{9871:function(e,t,a){var l=a(7877);const n=e=>l.Z.post("/Depots/fitter",e),i=e=>l.Z.post("/Depots",e),o=e=>l.Z.get(`/Depots/${e}`),d=e=>l.Z.put(`/Depots/${e.depotID}`,e),u=e=>l.Z["delete"](`/Depots/${e}`),s=()=>l.Z.get("/Depots/export_data"),c=e=>l.Z.get(`/Depots/ToggleActive/${e}`),r=()=>l.Z.get("/Depots"),v=()=>l.Z.get("/Depots/active");t["Z"]={exportDataApi:s,deleteRecordApi:u,editRecordApi:d,getRecordList:n,createRecordApi:i,getRecordApi:o,toggleActiveApi:c,getAllRecordList:r,getAllRecordListActive:v}},4419:function(e,t,a){var l=a(177);const{CTRL:n,SHIFT:i,ESC:o,S:d}=l.Z,u=[],s=function(e,t,a,l,s,c,r){e.keyCode===o?t(a):e.keyCode!==n&&e.keyCode!==i&&e.keyCode!==d||u.includes(e.keyCode)||(u.push(e.keyCode),3===u.length?(u.length=0,l(s)):2===u.length&&(u.includes(i)||(e.preventDefault(),u.length=0,c(r))))},c=function(e){e.keyCode!==n&&e.keyCode!==i&&e.keyCode!==d||u.includes(e.keyCode)&&(u.length=0)};t["Z"]={handleEventFormCtrlShiftS:s,handleEventInterruptFormCtrlShiftS:c}},8410:function(e,t){t["Z"]={WANNING_DELETE:"Bạn có thực sự muốn xoá bản ghi ",QUESTION_DATA_CHANGE:"Dữ liệu đã bị thay đổi. Bạn có muốn cất không?",ERROR_EMPTY_DATA:"Không được để trống ",ERROR_CORRECT_DATA:"Kiểm tra nhập đúng ",WANNING_DELETE_ALL:"Bạn có thực sự muốn xoá toàn bộ bản ghi được chọn?",DUPLICATE_CODE:"đã tồn tại trong hệ thống, vui lòng kiểm tra lại.",INVALID_INPUT:"Sai dữ liệu đầu vào, vui lòng kiểm tra lại",employeeNotification:{validateCode:"Mã nhân viên không được để trống.",validateName:"Tên nhân viên không được để trống.",validateUnit:"Dữ liệu <đơn vị> không có trong danh mục.",validatePhoneNumber:"Không đúng định dạng số điện thoại di động.",validateLandlinePhone:"Không đúng định dạng số điện thoại cố định.",validateEmail:"Không đúng định dạng Email.",validateDateOfBirth:"Ngày sinh phải nhỏ hơn ngày hiện tại.",validateDayForIdentity:"Ngày cấp phải nhỏ hơn ngày hiện tại.",nameDuplicateCode:"Mã nhân viên"},unitCalculationNotification:{validateName:"Đơn vị không được để trống"},depotNotification:{validateCode:"Mã kho không được để trống",validateName:"Tên kho không được để trống"},commodityGroupNotification:{validateCode:"Mã nhóm nguyên vật liệu không được để trống",validateName:"Tên nhóm nguyên vật liệu không được để trống"},inventoryItemNotification:{validateCode:"Mã hàng hoá không được để trống.",validateName:"Tên không được để trống.",validateUnit:"Đơn vị không có trong danh mục."}}},9176:function(e,t){t["Z"]={validateEmail:e=>{var t=/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/;return t.test(e)},validatePhone:e=>{var t=/(03|02|05|07|08|09|01[2|6|8|9])+([0-9]{8})\b/;return t.test(e)}}},5734:function(e,t,a){a.d(t,{Z:function(){return h}});var l=a(3396),n=a(7139),i=a(9242);const o={key:0,class:"tool-tip"},d=["disabled","type","placeholder","tabindex"];function u(e,t,a,u,s,c){return(0,l.wg)(),(0,l.iD)("div",{class:(0,n.C_)(["data-input",{"is-valid":u.isValid|u.isValidEmailPhone}])},[(0,l._)("label",{class:(0,n.C_)({required:a.required})},(0,n.zw)(a.label),3),a.toolTip?((0,l.wg)(),(0,l.iD)("span",o,(0,n.zw)(a.toolTip),1)):(0,l.kq)("",!0),(0,l.wy)((0,l._)("input",{disabled:a.disabled,ref:"tagInput",class:(0,n.C_)(["input",{"is-number":a.isNumber}]),type:a.type,"onUpdate:modelValue":t[0]||(t[0]=e=>u.valueHeader=e),placeholder:a.placeholder,tabindex:a.tab,onInput:t[1]||(t[1]=(...e)=>u.handleInput&&u.handleInput(...e)),onBlur:t[2]||(t[2]=(...e)=>u.handleCheckEmailPhone&&u.handleCheckEmailPhone(...e))},null,42,d),[[i.YZ,u.valueHeader]]),(0,l._)("span",{class:"message-valid",style:(0,n.j5)({left:a.leftMessage})},(0,n.zw)(a.messageValid),5)],2)}var s=a(4870),c=a(9176),r={props:["modelValue","maxLength","placeholder","required","type","messageValid","label","focus","tab","toolTip","isPhone","isEmail","isNumber","leftMessage","maxValue","disabled"],emits:["update:modelValue"],setup(e,t){const a=(0,s.iH)(null),{focus:n,required:i,isEmail:o,isPhone:d,maxLength:u,modelValue:r,isNumber:v,maxValue:p}=(0,s.BK)(e),h=(0,s.iH)(!1),m=(0,s.iH)(!1),{validateEmail:g,validatePhone:f}=c.Z,y=(0,s.iH)("");function _(e){if(u.value&&!v.value)e.target.value.length<=u.value?(C(e.target.value),m.value=!1,i.value&&(""==e.target.value.trim()?h.value=!0:h.value=!1)):y.value=r.value;else if(v.value){const t=k(e.target.value);D(t)||""===t?"."===e.data||","===e.data?y.value=N(r.value)+",":(y.value=N(r.value),C(t)):y.value=N(r.value)}else C(e.target.value),m.value=!1,i.value&&(""==e.target.value?h.value=!0:h.value=!1)}function C(e){p.value?Number(e)<=p.value?t.emit("update:modelValue",e):y.value=N(r.value):t.emit("update:modelValue",e)}function N(e){if(e){let l=Math.trunc(e);const n=Number((e-l).toFixed(2));if(l=""+l,l.length>3){var t=l.length%3,a=t>0?l.substring(0,t):"";for(let e=0;e<Math.floor(l.length/3);e++)a+=0==t&&0==e?l.substring(t+3*e,t+3*e+3):"."+l.substring(t+3*e,t+3*e+3);return 0!==n?a+","+(n+"").slice(2):a}return 0!==n?l+","+(n+"").slice(2):l}return 0===e||"0"===e?0:""}function k(e){const t=e.replace(/\./g,"").replace(/,/g,".");return t||""}function b(e){""!=e.target.value&&(o.value?!1===g(e.target.value)?m.value=!0:m.value=!1:d.value&&(!1===f(e.target.value)?m.value=!0:m.value=!1))}function D(e){return!isNaN(parseFloat(e))&&!isNaN(e-0)}return(0,l.YP)(r,(e=>{v.value?y.value=N(e):y.value=e})),(0,l.wF)((()=>{v.value?y.value=N(r.value):y.value=r.value})),(0,l.bv)((()=>{!0===n.value&&setTimeout((()=>{a.value.focus()}),150)})),{tagInput:a,isValid:h,valueHeader:y,isValidEmailPhone:m,handleCheckEmailPhone:b,handleInput:_}}},v=a(89);const p=(0,v.Z)(r,[["render",u]]);var h=p},1561:function(e,t,a){a.r(t),a.d(t,{default:function(){return x}});var l=a(3396),n=a(7139),i=a(9242);const o=e=>((0,l.dD)("data-v-29916e82"),e=e(),(0,l.Cn)(),e),d={class:"modal-body"},u={class:"form"},s={class:"form-header"},c={class:"modal-title"},r={class:"modal-close"},v=o((()=>(0,l._)("div",{class:"modal-icon modal-icon_help"},null,-1))),p={class:"form-container"},h={class:"form-item_input"},m={class:"form-group ms-small"},g={class:"form-group ms-big"},f={class:"form-group"},y=o((()=>(0,l._)("label",null,"Địa chỉ",-1))),_={class:"form-action"},C={class:"form-action_container"},N={class:"form-action_item"},k={class:"form-action_item"},b={ref:"focusLoop",class:"focus-loop"};function D(e,t,a,o,D,E){const A=(0,l.up)("input-default");return(0,l.wg)(),(0,l.iD)("div",d,[(0,l._)("div",u,[(0,l._)("div",s,[(0,l._)("div",c,[(0,l._)("h2",null,(0,n.zw)(o.titleForm),1)]),(0,l._)("div",r,[v,(0,l._)("div",{onClick:t[0]||(t[0]=e=>o.handleCloseModal(!1)),class:"modal-icon modal-icon_close"})])]),(0,l._)("div",p,[(0,l._)("div",h,[(0,l._)("div",m,[(0,l.Wm)(A,{focus:!0,required:!0,type:"text",maxLength:20,messageValid:o.depotNotification.validateCode,label:"Mã",class:(0,n.C_)({"is-valid":o.isValid&&""==o.depot.depotCode}),modelValue:o.depot.depotCode,"onUpdate:modelValue":t[1]||(t[1]=e=>o.depot.depotCode=e),ref:"inputFocus"},null,8,["messageValid","class","modelValue"])]),(0,l._)("div",g,[(0,l.Wm)(A,{required:!0,type:"text",maxLength:80,messageValid:o.depotNotification.validateName,label:"Tên",class:(0,n.C_)({"is-valid":o.isValid&&""==o.depot.depotName}),modelValue:o.depot.depotName,"onUpdate:modelValue":t[2]||(t[2]=e=>o.depot.depotName=e)},null,8,["messageValid","class","modelValue"])])]),(0,l._)("div",f,[y,(0,l.wy)((0,l._)("textarea",{class:"input","onUpdate:modelValue":t[3]||(t[3]=e=>o.depot.depotDelivery=e)},null,512),[[i.nr,o.depot.depotDelivery]])])]),(0,l._)("div",_,[(0,l._)("div",C,[(0,l._)("div",N,[(0,l._)("button",{onClick:t[4]||(t[4]=e=>o.handleSaveData(!0)),style:{"margin-right":"9px"},class:"btn modal-icon btn-form_cat"}," Cất "),(0,l._)("button",{onClick:t[5]||(t[5]=e=>o.handleSaveData(!1)),class:"btn btn-success modal-icon btn-form_cat-them"}," Cất và thêm ")]),(0,l._)("div",k,[(0,l._)("button",{onClick:t[6]||(t[6]=e=>o.handleCloseModal(!0)),tabindex:6,class:"btn"}," Huỷ ")])])]),(0,l._)("button",b,null,512)])])}var E=a(4870),A=a(5734),w=a(65),V=a(177),I=a(8410),T=a(4419),S=a(7794),Z=a(9871),L={components:{InputDefault:A.Z},props:{recordEdit:{type:Object},recordAdd:{type:Object}},setup(e,t){const{createRecordApi:a,editRecordApi:n}=Z.Z,i=(0,E.iH)(""),{QUESTION_DATA_CHANGE:o,depotNotification:d}=I.Z,u=(0,E.iH)(null),s=(0,E.iH)(null),c=(0,E.iH)(!0),{recordEdit:r,recordAdd:v}=(0,E.BK)(e),p=(0,E.iH)(!1),h=(0,w.oR)(),{TypeSuccess:m,MessageSuccessAdd:g,MessageSuccessEdit:f,AddFormDepot:y,EditFormDepot:_}=V.Z,C=(0,E.iH)({depotCode:"",depotName:"",depotDelivery:"",isActive:!0}),N=(0,E.iH)(null),k=(0,E.iH)({depotCode:"",depotName:"",depotDelivery:"",isActive:!0});(0,l.wF)((async()=>{i.value=y,r.value?(i.value=_,C.value={...r.value},c.value=!1,N.value={...r.value}):(i.value=y,v.value&&(C.value={...v.value}))}));const b=function(){u.value.tagInput.focus()},{handleEventFormCtrlShiftS:D,handleEventInterruptFormCtrlShiftS:A}=T.Z;function L(e){try{D(e,O,null,F,!1,F,!0)}catch(t){console.log(t)}}function R(){return[""===C.value.depotCode.trim()?d.validateCode:null,""===C.value.depotName.trim()?d.validateName:null].filter((e=>{if(e)return!0}))}(0,l.bv)((()=>s.value.addEventListener("focus",b))),(0,l.bv)((()=>window.addEventListener("keydown",L))),(0,l.bv)((()=>window.addEventListener("keyup",A))),(0,l.Ah)((()=>window.removeEventListener("focus",b))),(0,l.Ah)((()=>window.removeEventListener("keydown",L))),(0,l.Ah)((()=>window.removeEventListener("keyup",A)));const H=(0,E.iH)(!1);async function x(e){await(0,S.Z)(e,{...C.value},(async e=>{t.emit("handle-save-data-props",{...C.value,depotID:e}),h.dispatch("config/addNotification",{type:m,message:c.value?g:f}),H.value=!1,c.value?h.dispatch("depot/addRecordAction",{...C.value,depotID:e}):(c.value=!0,h.dispatch("depot/editRecordAction",{...C.value,depotID:e}))}),h,!1,(()=>{H.value=!0}))}async function F(e){try{const l=R();l.length>0?(p.value=!0,h.dispatch("config/setToggleShowNotificationErrorAction",l)):(c.value?await x(a):await x(n),!0===e&&!1===H.value?t.emit("handle-click-close-modal"):!1===H.value&&(i.value=y,p.value=!1,C.value={...k.value},u.value.tagInput.focus()))}catch(l){console.log(l)}}function M(){try{t.emit("handle-click-close-modal")}catch(e){console.log(e)}}function P(){F(!0)}function O(e){try{e?t.emit("handle-click-close-modal"):c.value?JSON.stringify(C.value)!=JSON.stringify(k.value)?U():t.emit("handle-click-close-modal"):!1===c.value&&(JSON.stringify(C.value)!=JSON.stringify(N.value)?U():t.emit("handle-click-close-modal"))}catch(a){console.log(a)}}function U(){h.dispatch("config/setToggleShowNotificationQuestionAction",{action:P,refuseAction:M,message:o})}return{inputFocus:u,depot:C,depotNotification:d,isValid:p,focusLoop:s,titleForm:i,handleCloseModal:O,handleSaveData:F}},emits:["handle-click-close-modal","handle-save-data-props"]},R=a(89);const H=(0,R.Z)(L,[["render",D],["__scopeId","data-v-29916e82"]]);var x=H}}]);
//# sourceMappingURL=561.fd10a042.js.map