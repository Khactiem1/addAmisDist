"use strict";(self["webpackChunkquanlynhanvien_amis_ketoan"]=self["webpackChunkquanlynhanvien_amis_ketoan"]||[]).push([[48],{9871:function(e,t,a){var o=a(7877);const l=e=>o.Z.post("/Depots/fitter",e),n=e=>o.Z.post("/Depots",e),i=e=>o.Z.get(`/Depots/${e}`),c=e=>o.Z.put(`/Depots/${e.depotID}`,e),d=e=>o.Z["delete"](`/Depots/${e}`),s=()=>o.Z.get("/Depots/export_data"),r=e=>o.Z.get(`/Depots/ToggleActive/${e}`),u=()=>o.Z.get("/Depots"),v=()=>o.Z.get("/Depots/active");t["Z"]={exportDataApi:s,deleteRecordApi:d,editRecordApi:c,getRecordList:l,createRecordApi:n,getRecordApi:i,toggleActiveApi:r,getAllRecordList:u,getAllRecordListActive:v}},4048:function(e,t,a){a.r(t),a.d(t,{default:function(){return J}});var o=a(3396),l=a(7139);const n=e=>((0,o.dD)("data-v-6357f002"),e=e(),(0,o.Cn)(),e),i={class:"container-table"},c={class:"container-table_header"},d={class:"name-table"},s=n((()=>(0,o._)("h1",null,"Kho",-1))),r=n((()=>(0,o._)("div",{class:"prev_page-icon"},null,-1))),u=n((()=>(0,o._)("div",{class:"prev_page-text"},"Tất cả danh mục",-1))),v={class:"action-table"},p={class:"table-content"},m={class:"table-function sticky"},g={class:"search-table"},h=n((()=>(0,o._)("div",{class:"icon-search"},null,-1))),f={class:"table-function_search"},_=["href"],b={class:"table-scroll"},w={class:"table-container"},y={key:0,class:"paging-container sticky"},A={class:"total-record"},C=(0,o.Uk)(" Tổng số: "),k=(0,o.Uk)(" bản ghi "),D={class:"paging"};function R(e,t,a,n,R,L){const S=(0,o.up)("router-link"),Z=(0,o.up)("table-data"),E=(0,o.up)("input-combobox"),T=(0,o.up)("paging-page"),N=(0,o.up)("form-depot"),P=(0,o.up)("modal-form");return(0,o.wg)(),(0,o.iD)("div",i,[(0,o._)("div",c,[(0,o._)("div",d,[s,(0,o.Wm)(S,{to:"/warehouse",class:"prev_page"},{default:(0,o.w5)((()=>[r,u])),_:1})]),(0,o._)("div",v,[(0,o._)("button",{onClick:t[0]||(t[0]=e=>n.handleOpenModal(!0)),class:"btn btn-success btn-add"}," Thêm ")])]),(0,o._)("div",p,[(0,o._)("div",m,[(0,o._)("div",g,[(0,o._)("input",{class:"input input-table_search",type:"text",onInput:t[1]||(t[1]=(...e)=>n.handleSearchData&&n.handleSearchData(...e)),placeholder:"Tìm theo mã kho, tên kho"},null,32),h]),(0,o._)("div",f,[(0,o._)("div",{onClick:t[2]||(t[2]=e=>n.loadData({v_Offset:n.recordSelectPaging,v_Limit:n.countRecordPageRecord,v_Where:n.keyword})),class:"action-render_table reload-table"}),(0,o._)("a",{target:"_blank",href:n.configs.baseUrl+"/Depots/export_data?keyword="+n.keyword,class:"action-render_table export-data"},null,8,_)])]),(0,o._)("div",b,[(0,o._)("div",w,[(0,o.Wm)(Z,{tableList:n.recordList,columns:n.columns,actionTable:n.actionTable,handleClickActionColumTable:n.handleClickActionColumTable,isShowLoaderTable:n.isShowLoaderTable},null,8,["tableList","columns","actionTable","handleClickActionColumTable","isShowLoaderTable"])])]),0!==n.recordList.length?((0,o.wg)(),(0,o.iD)("div",y,[(0,o._)("div",A,[C,(0,o._)("strong",null,(0,l.zw)(n.totalCount),1),k]),(0,o._)("div",D,[(0,o.Wm)(E,{options:[{value:10,header:"10 bản ghi trên 1 trang"},{value:20,header:"20 bản ghi trên 1 trang"},{value:30,header:"30 bản ghi trên 1 trang"},{value:50,header:"50 bản ghi trên 1 trang"},{value:100,header:"100 bản ghi trên 1 trang"}],disabled:!0,value:"value",header:"header",noAnimation:!0,modelValue:n.countRecordPageRecord,"onUpdate:modelValue":t[3]||(t[3]=e=>n.countRecordPageRecord=e),autoPosition:!0},null,8,["modelValue"]),((0,o.wg)(),(0,o.j4)(T,{totalCount:n.totalCount,countRecordPageRecord:n.countRecordPageRecord,modelValue:n.recordSelectPaging,"onUpdate:modelValue":t[4]||(t[4]=e=>n.recordSelectPaging=e),key:n.countRecordPageRecord||n.keyword},null,8,["totalCount","countRecordPageRecord","modelValue"]))])])):(0,o.kq)("",!0)]),((0,o.wg)(),(0,o.j4)(o.lR,{to:"#app"},[n.isShowModal?((0,o.wg)(),(0,o.j4)(P,{key:0},{default:(0,o.w5)((()=>[(0,o.Wm)(N,{onHandleClickCloseModal:n.handleCloseModal,recordEdit:n.recordEdit,recordAdd:n.recordAdd},null,8,["onHandleClickCloseModal","recordEdit","recordAdd"])])),_:1})):(0,o.kq)("",!0)]))])}var L=a(3403),S=a(6654),Z=a(8334),E=a(1561),T=a(9121),N=a(4930),P=a(5257),H=a(4870),V=a(65),I=a(9468),F=a(8410),M=a(2325),O=a(6730),x=a(177),W=a(7794),U=a(9871),q={components:{TableData:L.Z,ModalForm:Z.Z,InputCombobox:P.Z,FormDepot:E["default"],PagingPage:S.Z},setup(){const{getRecordList:e,getRecordApi:t,deleteRecordApi:a,toggleActiveApi:l}=U.Z,{TypeSuccess:n,MessageSuccessDelete:i}=x.Z,{getCountRecordPageRecord:c,setCountRecordPageRecord:d}=M.Z,s=(0,o.Fl)((()=>g.state.depot.columns.filter((function(e){return e.isShow})))),{EDIT:r,DELETE:u,REPLICATION:v,STOP_USING:p}=I.Z,{WANNING_DELETE:m}=F.Z,g=(0,V.oR)(),h=(0,o.Fl)((()=>g.state.depot.recordList)),f=(0,o.Fl)((()=>g.state.depot.totalCount)),_=(0,o.Fl)((()=>g.state.depot.actionTable)),b=(0,H.iH)(null),w=(0,H.iH)(null),y=(0,H.iH)(!1),A=(0,H.iH)(!1),C=(0,H.iH)(c()),k=(0,H.iH)(0),D=(0,H.iH)("");async function R(t){t&&(await g.dispatch("depot/setFilterAction",t),A.value=!0);const a=g.state.depot.filter;await(0,W.Z)(e,a,(e=>{g.dispatch("depot/getRecordListAction",e)}),g,!0),t&&(A.value=!1)}async function L(e){await(0,W.Z)(a,e,(()=>{g.dispatch("config/addNotification",{type:n,message:i}),R()}),g)}async function S(e,t,a){try{e==r?E(t):e==u?P(t,a):e==v?q(t):e===p&&Z(t)}catch(o){console.log(o)}}async function Z(e){await(0,W.Z)(l,e,(()=>{g.dispatch("depot/setToggleActiveAction",e)}),g,!0)}async function E(e){await(0,W.Z)(t,e,(e=>{b.value=e,J(r)}),g)}async function P(e,t){g.dispatch("config/setToggleShowNotificationWanningAction",{action:L,message:m+`<${t}> không?`,id:e})}async function q(e){await(0,W.Z)(t,e,(async e=>{w.value={...e},J(v)}),g)}function j(e){try{(0,N.Z)(600,$,e)}catch(t){console.log(t)}}function $(e){D.value=e.target.value,k.value=0,R({v_Offset:k.value,v_Limit:C.value,v_Where:D.value})}function J(e){try{!0===e?(b.value=null,w.value=null):e===r?w.value=null:e===v&&(b.value=null),y.value=!y.value}catch(t){console.log(t)}}function G(){y.value=!y.value}(0,o.YP)(C,(e=>{d(e),R({v_Offset:0,v_Limit:C.value,v_Where:D.value})})),(0,o.YP)(k,(()=>{R({v_Offset:k.value,v_Limit:C.value,v_Where:D.value})})),(0,o.wF)((()=>{R({v_Offset:k.value,v_Limit:C.value,v_Where:D.value})}));const{handleEventCtrlAltA:z,handleEventInterruptCtrlAltA:K}=T.Z;function Q(e){try{z(e,J,!0)}catch(t){console.log(t)}}return(0,o.bv)((()=>window.addEventListener("keydown",Q))),(0,o.bv)((()=>window.addEventListener("keyup",K))),(0,o.Ah)((()=>window.removeEventListener("keydown",Q))),(0,o.Ah)((()=>window.removeEventListener("keyup",K))),{recordList:h,totalCount:f,columns:s,actionTable:_,isShowModal:y,countRecordPageRecord:C,recordEdit:b,recordAdd:w,isShowLoaderTable:A,recordSelectPaging:k,keyword:D,configs:O.Z,handleOpenModal:J,handleCloseModal:G,handleClickActionColumTable:S,handleSearchData:j,loadData:R}}},j=a(89);const $=(0,j.Z)(q,[["render",R],["__scopeId","data-v-6357f002"]]);var J=$},1561:function(e,t,a){a.r(t),a.d(t,{default:function(){return I}});var o=a(3396),l=a(7139),n=a(9242);const i=e=>((0,o.dD)("data-v-29916e82"),e=e(),(0,o.Cn)(),e),c={class:"modal-body"},d={class:"form"},s={class:"form-header"},r={class:"modal-title"},u={class:"modal-close"},v=i((()=>(0,o._)("div",{class:"modal-icon modal-icon_help"},null,-1))),p={class:"form-container"},m={class:"form-item_input"},g={class:"form-group ms-small"},h={class:"form-group ms-big"},f={class:"form-group"},_=i((()=>(0,o._)("label",null,"Địa chỉ",-1))),b={class:"form-action"},w={class:"form-action_container"},y={class:"form-action_item"},A={class:"form-action_item"},C={ref:"focusLoop",class:"focus-loop"};function k(e,t,a,i,k,D){const R=(0,o.up)("input-default");return(0,o.wg)(),(0,o.iD)("div",c,[(0,o._)("div",d,[(0,o._)("div",s,[(0,o._)("div",r,[(0,o._)("h2",null,(0,l.zw)(i.titleForm),1)]),(0,o._)("div",u,[v,(0,o._)("div",{onClick:t[0]||(t[0]=e=>i.handleCloseModal(!1)),class:"modal-icon modal-icon_close"})])]),(0,o._)("div",p,[(0,o._)("div",m,[(0,o._)("div",g,[(0,o.Wm)(R,{focus:!0,required:!0,type:"text",maxLength:20,messageValid:i.depotNotification.validateCode,label:"Mã",class:(0,l.C_)({"is-valid":i.isValid&&""==i.depot.depotCode}),modelValue:i.depot.depotCode,"onUpdate:modelValue":t[1]||(t[1]=e=>i.depot.depotCode=e),ref:"inputFocus"},null,8,["messageValid","class","modelValue"])]),(0,o._)("div",h,[(0,o.Wm)(R,{required:!0,type:"text",maxLength:80,messageValid:i.depotNotification.validateName,label:"Tên",class:(0,l.C_)({"is-valid":i.isValid&&""==i.depot.depotName}),modelValue:i.depot.depotName,"onUpdate:modelValue":t[2]||(t[2]=e=>i.depot.depotName=e)},null,8,["messageValid","class","modelValue"])])]),(0,o._)("div",f,[_,(0,o.wy)((0,o._)("textarea",{class:"input","onUpdate:modelValue":t[3]||(t[3]=e=>i.depot.depotDelivery=e)},null,512),[[n.nr,i.depot.depotDelivery]])])]),(0,o._)("div",b,[(0,o._)("div",w,[(0,o._)("div",y,[(0,o._)("button",{onClick:t[4]||(t[4]=e=>i.handleSaveData(!0)),style:{"margin-right":"9px"},class:"btn modal-icon btn-form_cat"}," Cất "),(0,o._)("button",{onClick:t[5]||(t[5]=e=>i.handleSaveData(!1)),class:"btn btn-success modal-icon btn-form_cat-them"}," Cất và thêm ")]),(0,o._)("div",A,[(0,o._)("button",{onClick:t[6]||(t[6]=e=>i.handleCloseModal(!0)),tabindex:6,class:"btn"}," Huỷ ")])])]),(0,o._)("button",C,null,512)])])}var D=a(4870),R=a(5734),L=a(65),S=a(177),Z=a(8410),E=a(4419),T=a(7794),N=a(9871),P={components:{InputDefault:R.Z},props:{recordEdit:{type:Object},recordAdd:{type:Object}},setup(e,t){const{createRecordApi:a,editRecordApi:l}=N.Z,n=(0,D.iH)(""),{QUESTION_DATA_CHANGE:i,depotNotification:c}=Z.Z,d=(0,D.iH)(null),s=(0,D.iH)(null),r=(0,D.iH)(!0),{recordEdit:u,recordAdd:v}=(0,D.BK)(e),p=(0,D.iH)(!1),m=(0,L.oR)(),{TypeSuccess:g,MessageSuccessAdd:h,MessageSuccessEdit:f,AddFormDepot:_,EditFormDepot:b}=S.Z,w=(0,D.iH)({depotCode:"",depotName:"",depotDelivery:"",isActive:!0}),y=(0,D.iH)(null),A=(0,D.iH)({depotCode:"",depotName:"",depotDelivery:"",isActive:!0});(0,o.wF)((async()=>{n.value=_,u.value?(n.value=b,w.value={...u.value},r.value=!1,y.value={...u.value}):(n.value=_,v.value&&(w.value={...v.value}))}));const C=function(){d.value.tagInput.focus()},{handleEventFormCtrlShiftS:k,handleEventInterruptFormCtrlShiftS:R}=E.Z;function P(e){try{k(e,x,null,F,!1,F,!0)}catch(t){console.log(t)}}function H(){return[""===w.value.depotCode.trim()?c.validateCode:null,""===w.value.depotName.trim()?c.validateName:null].filter((e=>{if(e)return!0}))}(0,o.bv)((()=>s.value.addEventListener("focus",C))),(0,o.bv)((()=>window.addEventListener("keydown",P))),(0,o.bv)((()=>window.addEventListener("keyup",R))),(0,o.Ah)((()=>window.removeEventListener("focus",C))),(0,o.Ah)((()=>window.removeEventListener("keydown",P))),(0,o.Ah)((()=>window.removeEventListener("keyup",R)));const V=(0,D.iH)(!1);async function I(e){await(0,T.Z)(e,{...w.value},(async e=>{t.emit("handle-save-data-props",{...w.value,depotID:e}),m.dispatch("config/addNotification",{type:g,message:r.value?h:f}),V.value=!1,r.value?m.dispatch("depot/addRecordAction",{...w.value,depotID:e}):(r.value=!0,m.dispatch("depot/editRecordAction",{...w.value,depotID:e}))}),m,!1,(()=>{V.value=!0}))}async function F(e){try{const o=H();o.length>0?(p.value=!0,m.dispatch("config/setToggleShowNotificationErrorAction",o)):(r.value?await I(a):await I(l),!0===e&&!1===V.value?t.emit("handle-click-close-modal"):!1===V.value&&(n.value=_,p.value=!1,w.value={...A.value},d.value.tagInput.focus()))}catch(o){console.log(o)}}function M(){try{t.emit("handle-click-close-modal")}catch(e){console.log(e)}}function O(){F(!0)}function x(e){try{e?t.emit("handle-click-close-modal"):r.value?JSON.stringify(w.value)!=JSON.stringify(A.value)?W():t.emit("handle-click-close-modal"):!1===r.value&&(JSON.stringify(w.value)!=JSON.stringify(y.value)?W():t.emit("handle-click-close-modal"))}catch(a){console.log(a)}}function W(){m.dispatch("config/setToggleShowNotificationQuestionAction",{action:O,refuseAction:M,message:i})}return{inputFocus:d,depot:w,depotNotification:c,isValid:p,focusLoop:s,titleForm:n,handleCloseModal:x,handleSaveData:F}},emits:["handle-click-close-modal","handle-save-data-props"]},H=a(89);const V=(0,H.Z)(P,[["render",k],["__scopeId","data-v-29916e82"]]);var I=V}}]);
//# sourceMappingURL=48.8c496ddc.js.map