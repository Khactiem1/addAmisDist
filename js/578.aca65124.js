"use strict";(self["webpackChunkquanlynhanvien_amis_ketoan"]=self["webpackChunkquanlynhanvien_amis_ketoan"]||[]).push([[578],{7923:function(e,a,t){var n=t(7877);const l=e=>n.Z.post("/UnitCalculations/fitter",e),i=()=>n.Z.get("/UnitCalculations"),o=e=>n.Z.post("/UnitCalculations",e),u=e=>n.Z.get(`/UnitCalculations/${e}`),c=e=>n.Z.put(`/UnitCalculations/${e.unitCalculationID}`,e),s=e=>n.Z["delete"](`/UnitCalculations/${e}`),d=()=>n.Z.get("/UnitCalculations/export_data"),r=e=>n.Z.get(`/UnitCalculations/ToggleActive/${e}`),v=()=>n.Z.get("/UnitCalculations/active");a["Z"]={exportDataApi:d,deleteRecordApi:s,editRecordApi:c,getRecordList:l,createRecordApi:o,getRecordApi:u,toggleActiveApi:r,getAllRecordList:i,getAllRecordListActive:v}},4419:function(e,a,t){var n=t(177);const{CTRL:l,SHIFT:i,ESC:o,S:u}=n.Z,c=[],s=function(e,a,t,n,s,d,r){e.keyCode===o?a(t):e.keyCode!==l&&e.keyCode!==i&&e.keyCode!==u||c.includes(e.keyCode)||(c.push(e.keyCode),3===c.length?(c.length=0,n(s)):2===c.length&&(c.includes(i)||(e.preventDefault(),c.length=0,d(r))))},d=function(e){e.keyCode!==l&&e.keyCode!==i&&e.keyCode!==u||c.includes(e.keyCode)&&(c.length=0)};a["Z"]={handleEventFormCtrlShiftS:s,handleEventInterruptFormCtrlShiftS:d}},8410:function(e,a){a["Z"]={WANNING_DELETE:"Bạn có thực sự muốn xoá bản ghi ",QUESTION_DATA_CHANGE:"Dữ liệu đã bị thay đổi. Bạn có muốn cất không?",ERROR_EMPTY_DATA:"Không được để trống ",ERROR_CORRECT_DATA:"Kiểm tra nhập đúng ",WANNING_DELETE_ALL:"Bạn có thực sự muốn xoá toàn bộ bản ghi được chọn?",DUPLICATE_CODE:"đã tồn tại trong hệ thống, vui lòng kiểm tra lại.",INVALID_INPUT:"Sai dữ liệu đầu vào, vui lòng kiểm tra lại",employeeNotification:{validateCode:"Mã nhân viên không được để trống.",validateName:"Tên nhân viên không được để trống.",validateUnit:"Dữ liệu <đơn vị> không có trong danh mục.",validatePhoneNumber:"Không đúng định dạng số điện thoại di động.",validateLandlinePhone:"Không đúng định dạng số điện thoại cố định.",validateEmail:"Không đúng định dạng Email.",validateDateOfBirth:"Ngày sinh phải nhỏ hơn ngày hiện tại.",validateDayForIdentity:"Ngày cấp phải nhỏ hơn ngày hiện tại.",nameDuplicateCode:"Mã nhân viên"},unitCalculationNotification:{validateName:"Đơn vị không được để trống"},depotNotification:{validateCode:"Mã kho không được để trống",validateName:"Tên kho không được để trống"},commodityGroupNotification:{validateCode:"Mã nhóm nguyên vật liệu không được để trống",validateName:"Tên nhóm nguyên vật liệu không được để trống"},inventoryItemNotification:{validateCode:"Mã hàng hoá không được để trống.",validateName:"Tên không được để trống.",validateUnit:"Đơn vị không có trong danh mục."}}},9176:function(e,a){a["Z"]={validateEmail:e=>{var a=/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/;return a.test(e)},validatePhone:e=>{var a=/(03|02|05|07|08|09|01[2|6|8|9])+([0-9]{8})\b/;return a.test(e)}}},5734:function(e,a,t){t.d(a,{Z:function(){return m}});var n=t(3396),l=t(7139),i=t(9242);const o={key:0,class:"tool-tip"},u=["disabled","type","placeholder","tabindex"];function c(e,a,t,c,s,d){return(0,n.wg)(),(0,n.iD)("div",{class:(0,l.C_)(["data-input",{"is-valid":c.isValid|c.isValidEmailPhone}])},[(0,n._)("label",{class:(0,l.C_)({required:t.required})},(0,l.zw)(t.label),3),t.toolTip?((0,n.wg)(),(0,n.iD)("span",o,(0,l.zw)(t.toolTip),1)):(0,n.kq)("",!0),(0,n.wy)((0,n._)("input",{disabled:t.disabled,ref:"tagInput",class:(0,l.C_)(["input",{"is-number":t.isNumber}]),type:t.type,"onUpdate:modelValue":a[0]||(a[0]=e=>c.valueHeader=e),placeholder:t.placeholder,tabindex:t.tab,onInput:a[1]||(a[1]=(...e)=>c.handleInput&&c.handleInput(...e)),onBlur:a[2]||(a[2]=(...e)=>c.handleCheckEmailPhone&&c.handleCheckEmailPhone(...e))},null,42,u),[[i.YZ,c.valueHeader]]),(0,n._)("span",{class:"message-valid",style:(0,l.j5)({left:t.leftMessage})},(0,l.zw)(t.messageValid),5)],2)}var s=t(4870),d=t(9176),r={props:["modelValue","maxLength","placeholder","required","type","messageValid","label","focus","tab","toolTip","isPhone","isEmail","isNumber","leftMessage","maxValue","disabled"],emits:["update:modelValue"],setup(e,a){const t=(0,s.iH)(null),{focus:l,required:i,isEmail:o,isPhone:u,maxLength:c,modelValue:r,isNumber:v,maxValue:h}=(0,s.BK)(e),m=(0,s.iH)(!1),g=(0,s.iH)(!1),{validateEmail:p,validatePhone:f}=d.Z,C=(0,s.iH)("");function y(e){if(c.value&&!v.value)e.target.value.length<=c.value?(_(e.target.value),g.value=!1,i.value&&(""==e.target.value.trim()?m.value=!0:m.value=!1)):C.value=r.value;else if(v.value){const a=k(e.target.value);E(a)||""===a?"."===e.data||","===e.data?C.value=N(r.value)+",":(C.value=N(r.value),_(a)):C.value=N(r.value)}else _(e.target.value),g.value=!1,i.value&&(""==e.target.value?m.value=!0:m.value=!1)}function _(e){h.value?Number(e)<=h.value?a.emit("update:modelValue",e):C.value=N(r.value):a.emit("update:modelValue",e)}function N(e){if(e){let n=Math.trunc(e);const l=Number((e-n).toFixed(2));if(n=""+n,n.length>3){var a=n.length%3,t=a>0?n.substring(0,a):"";for(let e=0;e<Math.floor(n.length/3);e++)t+=0==a&&0==e?n.substring(a+3*e,a+3*e+3):"."+n.substring(a+3*e,a+3*e+3);return 0!==l?t+","+(l+"").slice(2):t}return 0!==l?n+","+(l+"").slice(2):n}return 0===e||"0"===e?0:""}function k(e){const a=e.replace(/\./g,"").replace(/,/g,".");return a||""}function b(e){""!=e.target.value&&(o.value?!1===p(e.target.value)?g.value=!0:g.value=!1:u.value&&(!1===f(e.target.value)?g.value=!0:g.value=!1))}function E(e){return!isNaN(parseFloat(e))&&!isNaN(e-0)}return(0,n.YP)(r,(e=>{v.value?C.value=N(e):C.value=e})),(0,n.wF)((()=>{v.value?C.value=N(r.value):C.value=r.value})),(0,n.bv)((()=>{!0===l.value&&setTimeout((()=>{t.value.focus()}),150)})),{tagInput:t,isValid:m,valueHeader:C,isValidEmailPhone:g,handleCheckEmailPhone:b,handleInput:y}}},v=t(89);const h=(0,v.Z)(r,[["render",c]]);var m=h},3578:function(e,a,t){t.r(a),t.d(a,{default:function(){return R}});var n=t(3396),l=t(7139),i=t(9242);const o=e=>((0,n.dD)("data-v-58e89368"),e=e(),(0,n.Cn)(),e),u={class:"modal-body"},c={class:"form"},s={class:"form-header"},d={class:"modal-title"},r={class:"modal-close"},v=o((()=>(0,n._)("div",{class:"modal-icon modal-icon_help"},null,-1))),h={class:"form-container"},m={class:"form-group ms-small"},g={class:"form-group"},p=o((()=>(0,n._)("label",null,"Mô tả",-1))),f={class:"form-action"},C={class:"form-action_container"},y={class:"form-action_item"},_={class:"form-action_item"},N={ref:"focusLoop",class:"focus-loop"};function k(e,a,t,o,k,b){const E=(0,n.up)("input-default");return(0,n.wg)(),(0,n.iD)("div",u,[(0,n._)("div",c,[(0,n._)("div",s,[(0,n._)("div",d,[(0,n._)("h2",null,(0,l.zw)(o.titleForm),1)]),(0,n._)("div",r,[v,(0,n._)("div",{onClick:a[0]||(a[0]=e=>o.handleCloseModal(!1)),class:"modal-icon modal-icon_close"})])]),(0,n._)("div",h,[(0,n._)("div",m,[(0,n.Wm)(E,{focus:!0,required:!0,type:"text",maxLength:100,messageValid:o.unitCalculationNotification.validateName,label:"Đơn vị tính",class:(0,l.C_)({"is-valid":o.isValid&&""==o.unitCalculation.unitCalculationName}),modelValue:o.unitCalculation.unitCalculationName,"onUpdate:modelValue":a[1]||(a[1]=e=>o.unitCalculation.unitCalculationName=e),ref:"inputFocus"},null,8,["messageValid","class","modelValue"])]),(0,n._)("div",g,[p,(0,n.wy)((0,n._)("textarea",{class:"input","onUpdate:modelValue":a[2]||(a[2]=e=>o.unitCalculation.unitCalculationDetail=e)},null,512),[[i.nr,o.unitCalculation.unitCalculationDetail]])])]),(0,n._)("div",f,[(0,n._)("div",C,[(0,n._)("div",y,[(0,n._)("button",{onClick:a[3]||(a[3]=e=>o.handleSaveData(!0)),style:{"margin-right":"9px"},class:"btn modal-icon btn-form_cat"}," Cất "),(0,n._)("button",{onClick:a[4]||(a[4]=e=>o.handleSaveData(!1)),class:"btn btn-success modal-icon btn-form_cat-them"}," Cất và thêm ")]),(0,n._)("div",_,[(0,n._)("button",{onClick:a[5]||(a[5]=e=>o.handleCloseModal(!0)),class:"btn"}," Huỷ ")])])]),(0,n._)("button",N,null,512)])])}var b=t(4870),E=t(5734),A=t(65),w=t(177),D=t(8410),I=t(4419),S=t(7794),T=t(7923),Z={components:{InputDefault:E.Z},props:{recordEdit:{type:Object},recordAdd:{type:Object}},setup(e,a){const{createRecordApi:t,editRecordApi:l}=T.Z,i=(0,b.iH)(""),{QUESTION_DATA_CHANGE:o,unitCalculationNotification:u}=D.Z,c=(0,b.iH)(null),s=(0,b.iH)(null),d=(0,b.iH)(!0),{recordEdit:r,recordAdd:v}=(0,b.BK)(e),h=(0,b.iH)(!1),m=(0,A.oR)(),{TypeSuccess:g,MessageSuccessAdd:p,MessageSuccessEdit:f,AddFormUnit:C,EditFormUnit:y}=w.Z,_=(0,b.iH)({unitCalculationName:"",unitCalculationDetail:"",isActive:!0}),N=(0,b.iH)(null),k=(0,b.iH)({unitCalculationName:"",unitCalculationDetail:"",isActive:!0});(0,n.wF)((async()=>{i.value=C,r.value?(i.value=y,_.value={...r.value},d.value=!1,N.value={...r.value}):(i.value=C,v.value&&(_.value={...v.value}))}));const E=function(){c.value.tagInput.focus()},{handleEventFormCtrlShiftS:Z,handleEventInterruptFormCtrlShiftS:V}=I.Z;function L(e){try{Z(e,P,null,F,!1,F,!0)}catch(a){console.log(a)}}function R(){return[""===_.value.unitCalculationName.trim()?u.validateName:null].filter((e=>{if(e)return!0}))}(0,n.bv)((()=>s.value.addEventListener("focus",E))),(0,n.bv)((()=>window.addEventListener("keydown",L))),(0,n.bv)((()=>window.addEventListener("keyup",V))),(0,n.Ah)((()=>window.removeEventListener("focus",E))),(0,n.Ah)((()=>window.removeEventListener("keydown",L))),(0,n.Ah)((()=>window.removeEventListener("keyup",V)));const H=(0,b.iH)(!1);async function U(e){await(0,S.Z)(e,{..._.value},(async e=>{a.emit("handle-save-data-props",{..._.value,unitCalculationID:e}),m.dispatch("config/addNotification",{type:g,message:d.value?p:f}),H.value=!1,d.value?m.dispatch("unitCalculation/addRecordAction",{..._.value,unitCalculationID:e}):(d.value=!0,m.dispatch("unitCalculation/editRecordAction",{..._.value,unitCalculationID:e}))}),m,!1,(()=>{H.value=!0}))}async function F(e){try{const n=R();n.length>0?(h.value=!0,m.dispatch("config/setToggleShowNotificationErrorAction",n)):(d.value?await U(t):await U(l),!0===e&&!1===H.value?a.emit("handle-click-close-modal"):!1===H.value&&(i.value=C,h.value=!1,_.value={...k.value},c.value.tagInput.focus()))}catch(n){console.log(n)}}function M(){try{a.emit("handle-click-close-modal")}catch(e){console.log(e)}}function x(){try{F(!0)}catch(e){console.log(e)}}function P(e){try{e?a.emit("handle-click-close-modal"):d.value?JSON.stringify(_.value)!=JSON.stringify(k.value)?O():a.emit("handle-click-close-modal"):!1===d.value&&(JSON.stringify(_.value)!=JSON.stringify(N.value)?O():a.emit("handle-click-close-modal"))}catch(t){console.log(t)}}function O(){m.dispatch("config/setToggleShowNotificationQuestionAction",{action:x,refuseAction:M,message:o})}return{inputFocus:c,unitCalculation:_,unitCalculationNotification:u,isValid:h,focusLoop:s,titleForm:i,handleCloseModal:P,handleSaveData:F}},emits:["handle-click-close-modal","handle-save-data-props"]},V=t(89);const L=(0,V.Z)(Z,[["render",k],["__scopeId","data-v-58e89368"]]);var R=L}}]);
//# sourceMappingURL=578.aca65124.js.map