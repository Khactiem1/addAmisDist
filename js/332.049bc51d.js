"use strict";(self["webpackChunkquanlynhanvien_amis_ketoan"]=self["webpackChunkquanlynhanvien_amis_ketoan"]||[]).push([[332],{2707:function(e,o,t){var a=t(7877);const l=()=>a.Z.get("/CommodityGroups"),i=e=>a.Z.post("/CommodityGroups/fitter",e),n=e=>a.Z.post("/CommodityGroups",e),c=e=>a.Z.get(`/CommodityGroups/${e}`),d=e=>a.Z.put(`/CommodityGroups/${e.commodityGroupID}`,e),r=e=>a.Z["delete"](`/CommodityGroups/${e}`),s=()=>a.Z.get("/CommodityGroups/export_data"),u=e=>a.Z.get(`/CommodityGroups/ToggleActive/${e}`),m=()=>a.Z.get("/CommodityGroups/active");o["Z"]={exportDataApi:s,deleteRecordApi:r,editRecordApi:d,getRecordList:i,createRecordApi:n,getRecordApi:c,getAllRecordList:l,toggleActiveApi:u,getAllRecordListActive:m}},1332:function(e,o,t){t.r(o),t.d(o,{default:function(){return $}});var a=t(3396),l=t(7139);const i=e=>((0,a.dD)("data-v-5872cad2"),e=e(),(0,a.Cn)(),e),n={class:"container-table"},c={class:"container-table_header"},d={class:"name-table"},r=i((()=>(0,a._)("h1",null,"Nhóm vật tư, hàng hóa, dịch vụ",-1))),s=i((()=>(0,a._)("div",{class:"prev_page-icon"},null,-1))),u=i((()=>(0,a._)("div",{class:"prev_page-text"},"Tất cả danh mục",-1))),m={class:"action-table"},v={class:"table-content"},p={class:"table-function sticky"},g={class:"search-table"},h=i((()=>(0,a._)("div",{class:"icon-search"},null,-1))),y={class:"table-function_search"},f=["href"],_={class:"table-scroll"},b={class:"table-container"},C={key:0,class:"paging-container sticky"},w={class:"total-record"},A=(0,a.Uk)(" Tổng số: "),k=(0,a.Uk)(" bản ghi "),G={class:"paging"};function L(e,o,t,i,L,Z){const R=(0,a.up)("router-link"),T=(0,a.up)("table-data"),S=(0,a.up)("input-combobox"),D=(0,a.up)("paging-page"),E=(0,a.up)("form-inventory-item-category"),N=(0,a.up)("modal-form");return(0,a.wg)(),(0,a.iD)("div",n,[(0,a._)("div",c,[(0,a._)("div",d,[r,(0,a.Wm)(R,{to:"/warehouse",class:"prev_page"},{default:(0,a.w5)((()=>[s,u])),_:1})]),(0,a._)("div",m,[(0,a._)("button",{onClick:o[0]||(o[0]=e=>i.handleOpenModal(!0)),class:"btn btn-success btn-add"}," Thêm ")])]),(0,a._)("div",v,[(0,a._)("div",p,[(0,a._)("div",g,[(0,a._)("input",{class:"input input-table_search",type:"text",onInput:o[1]||(o[1]=(...e)=>i.handleSearchData&&i.handleSearchData(...e)),placeholder:"Tìm theo nhóm vật tư, hàng hoá, dịch vụ"},null,32),h]),(0,a._)("div",y,[(0,a._)("div",{onClick:o[2]||(o[2]=e=>i.loadData({v_Offset:i.recordSelectPaging,v_Limit:i.countRecordPageRecord,v_Where:i.keyword})),class:"action-render_table reload-table"}),(0,a._)("a",{target:"_blank",href:i.configs.baseUrl+"/CommodityGroups/export_data?keyword="+i.keyword,class:"action-render_table export-data"},null,8,f)])]),(0,a._)("div",_,[(0,a._)("div",b,[(0,a.Wm)(T,{tableList:i.recordList,columns:i.columns,actionTable:i.actionTable,handleClickActionColumTable:i.handleClickActionColumTable,isShowLoaderTable:i.isShowLoaderTable,listTree:!0},null,8,["tableList","columns","actionTable","handleClickActionColumTable","isShowLoaderTable"])])]),0!==i.recordList.length?((0,a.wg)(),(0,a.iD)("div",C,[(0,a._)("div",w,[A,(0,a._)("strong",null,(0,l.zw)(i.totalCount),1),k]),(0,a._)("div",G,[(0,a.Wm)(S,{options:[{value:10,header:"10 bản ghi trên 1 trang"},{value:20,header:"20 bản ghi trên 1 trang"},{value:30,header:"30 bản ghi trên 1 trang"},{value:50,header:"50 bản ghi trên 1 trang"},{value:100,header:"100 bản ghi trên 1 trang"}],disabled:!0,value:"value",header:"header",noAnimation:!0,modelValue:i.countRecordPageRecord,"onUpdate:modelValue":o[3]||(o[3]=e=>i.countRecordPageRecord=e),autoPosition:!0},null,8,["modelValue"]),((0,a.wg)(),(0,a.j4)(D,{totalCount:i.totalCount,countRecordPageRecord:i.countRecordPageRecord,modelValue:i.recordSelectPaging,"onUpdate:modelValue":o[4]||(o[4]=e=>i.recordSelectPaging=e),key:i.countRecordPageRecord||i.keyword},null,8,["totalCount","countRecordPageRecord","modelValue"]))])])):(0,a.kq)("",!0)]),((0,a.wg)(),(0,a.j4)(a.lR,{to:"#app"},[i.isShowModal?((0,a.wg)(),(0,a.j4)(N,{key:0},{default:(0,a.w5)((()=>[(0,a.Wm)(E,{onHandleClickCloseModal:i.handleCloseModal,recordEdit:i.recordEdit,recordAdd:i.recordAdd},null,8,["onHandleClickCloseModal","recordEdit","recordAdd"])])),_:1})):(0,a.kq)("",!0)]))])}var Z=t(3403),R=t(6654),T=t(8334),S=t(8781),D=t(9121),E=t(4930),N=t(5257),I=t(4870),V=t(65),H=t(9468),P=t(8410),F=t(2325),M=t(6730),x=t(177),O=t(7794),W=t(2707),U={components:{TableData:Z.Z,ModalForm:T.Z,InputCombobox:N.Z,FormInventoryItemCategory:S["default"],PagingPage:R.Z},setup(){const{getRecordList:e,getRecordApi:o,deleteRecordApi:t,toggleActiveApi:l}=W.Z,{TypeSuccess:i,MessageSuccessDelete:n}=x.Z,{getCountRecordPageRecord:c,setCountRecordPageRecord:d}=F.Z,r=(0,a.Fl)((()=>g.state.commodityGroup.columns.filter((function(e){return e.isShow})))),{EDIT:s,DELETE:u,REPLICATION:m,STOP_USING:v}=H.Z,{WANNING_DELETE:p}=P.Z,g=(0,V.oR)(),h=(0,a.Fl)((()=>g.state.commodityGroup.recordList)),y=(0,a.Fl)((()=>g.state.commodityGroup.totalCount)),f=(0,a.Fl)((()=>g.state.commodityGroup.actionTable)),_=(0,I.iH)(null),b=(0,I.iH)(null),C=(0,I.iH)(!1),w=(0,I.iH)(!1),A=(0,I.iH)(c()),k=(0,I.iH)(0),G=(0,I.iH)("");(0,a.YP)(A,(e=>{d(e),Z({v_Offset:0,v_Limit:A.value,v_Where:G.value})})),(0,a.YP)(k,(()=>{Z({v_Offset:k.value,v_Limit:A.value,v_Where:G.value})}));const{listToTree:L}=F.Z;async function Z(o){o&&(await g.dispatch("commodityGroup/setFilterAction",o),w.value=!0);const t=g.state.commodityGroup.filter;await(0,O.Z)(e,t,(async e=>{g.dispatch("commodityGroup/getRecordListAction",{recordList:L(e.recordList,"commodityGroupID"),totalCount:e.totalCount})}),g,!0),o&&(w.value=!1)}async function R(e){await(0,O.Z)(t,e,(()=>{g.dispatch("config/addNotification",{type:i,message:n}),Z()}),g)}async function T(e,o,t){try{e==s?N(o):e==u?U(o,t):e==m?q(o):e===v&&S(o)}catch(a){console.log(a)}}async function S(e){await(0,O.Z)(l,e,(()=>{g.dispatch("commodityGroup/setToggleActiveAction",e)}),g,!0)}async function N(e){await(0,O.Z)(o,e,(e=>{_.value=e,J(s)}),g)}async function U(e,o){g.dispatch("config/setToggleShowNotificationWanningAction",{action:R,message:p+`<${o}> không?`,id:e})}async function q(e){await(0,O.Z)(o,e,(async e=>{b.value={...e},J(m)}),g)}function j(e){try{(0,E.Z)(600,$,e)}catch(o){console.log(o)}}function $(e){G.value=e.target.value,k.value=0,Z({v_Offset:k.value,v_Limit:A.value,v_Where:G.value})}function J(e){try{!0===e?(_.value=null,b.value=null):e===s?b.value=null:e===m&&(_.value=null),C.value=!C.value}catch(o){console.log(o)}}function z(){C.value=!C.value}(0,a.wF)((()=>{Z({v_Offset:k.value,v_Limit:A.value,v_Where:G.value})}));const{handleEventCtrlAltA:B,handleEventInterruptCtrlAltA:Q}=D.Z;function Y(e){try{B(e,J,!0)}catch(o){console.log(o)}}return(0,a.bv)((()=>window.addEventListener("keydown",Y))),(0,a.bv)((()=>window.addEventListener("keyup",Q))),(0,a.Ah)((()=>window.removeEventListener("keydown",Y))),(0,a.Ah)((()=>window.removeEventListener("keyup",Q))),{recordList:h,totalCount:y,columns:r,actionTable:f,isShowModal:C,countRecordPageRecord:A,recordEdit:_,recordAdd:b,isShowLoaderTable:w,recordSelectPaging:k,keyword:G,configs:M.Z,handleOpenModal:J,handleCloseModal:z,handleClickActionColumTable:T,handleSearchData:j,loadData:Z}}},q=t(89);const j=(0,q.Z)(U,[["render",L],["__scopeId","data-v-5872cad2"]]);var $=j},8781:function(e,o,t){t.r(o),t.d(o,{default:function(){return H}});var a=t(3396),l=t(7139);const i=e=>((0,a.dD)("data-v-f2d1d18e"),e=e(),(0,a.Cn)(),e),n={class:"modal-body"},c={class:"form"},d={class:"form-header"},r={class:"modal-title"},s={class:"modal-close"},u=i((()=>(0,a._)("div",{class:"modal-icon modal-icon_help"},null,-1))),m={class:"form-container"},v={class:"form-item_input"},p={class:"form-group ms-small"},g={class:"form-group ms-big"},h={class:"form-group"},y={class:"form-action"},f={class:"form-action_container"},_={class:"form-action_item"},b={class:"form-action_item"},C={ref:"focusLoop",class:"focus-loop"};function w(e,o,t,i,w,A){const k=(0,a.up)("input-default"),G=(0,a.up)("base-combobox");return(0,a.wg)(),(0,a.iD)("div",n,[(0,a._)("div",c,[(0,a._)("div",d,[(0,a._)("div",r,[(0,a._)("h2",null,(0,l.zw)(i.titleForm),1)]),(0,a._)("div",s,[u,(0,a._)("div",{onClick:o[0]||(o[0]=e=>i.handleCloseModal(!1)),class:"modal-icon modal-icon_close"})])]),(0,a._)("div",m,[(0,a._)("div",v,[(0,a._)("div",p,[(0,a.Wm)(k,{focus:!0,required:!0,type:"text",maxLength:25,messageValid:i.commodityGroupNotification.validateCode,label:"Mã",class:(0,l.C_)({"is-valid":i.isValid&&""==i.commodityGroup.commodityCode}),modelValue:i.commodityGroup.commodityCode,"onUpdate:modelValue":o[1]||(o[1]=e=>i.commodityGroup.commodityCode=e),ref:"inputFocus"},null,8,["messageValid","class","modelValue"])]),(0,a._)("div",g,[(0,a.Wm)(k,{required:!0,type:"text",maxLength:80,messageValid:i.commodityGroupNotification.validateName,label:"Tên",class:(0,l.C_)({"is-valid":i.isValid&&""==i.commodityGroup.commodityName}),modelValue:i.commodityGroup.commodityName,"onUpdate:modelValue":o[2]||(o[2]=e=>i.commodityGroup.commodityName=e)},null,8,["messageValid","class","modelValue"])])]),(0,a._)("div",h,[(0,a.Wm)(G,{widthLabelCode:"150px",options:i.optionCommodityGroup,value:"commodityGroupID",header:"commodityName",label:"Thuộc",labelCode:"Mã nhóm",labelName:"Tên nhóm",headerCode:"commodityCode",modelValue:i.commodityGroup.parentID,"onUpdate:modelValue":o[3]||(o[3]=e=>i.commodityGroup.parentID=e)},null,8,["options","modelValue"])])]),(0,a._)("div",y,[(0,a._)("div",f,[(0,a._)("div",_,[(0,a._)("button",{onClick:o[4]||(o[4]=e=>i.handleSaveData(!0)),style:{"margin-right":"9px"},class:"btn modal-icon btn-form_cat"}," Cất "),(0,a._)("button",{onClick:o[5]||(o[5]=e=>i.handleSaveData(!1)),class:"btn btn-success modal-icon btn-form_cat-them"}," Cất và thêm ")]),(0,a._)("div",b,[(0,a._)("button",{onClick:o[6]||(o[6]=e=>i.handleCloseModal(!0)),class:"btn"}," Huỷ ")])])]),(0,a._)("button",C,null,512)])])}var A=t(4870),k=t(5734),G=t(5257),L=t(65),Z=t(177),R=t(8410),T=t(4419),S=t(7794),D=t(2707),E=t(2325),N={components:{InputDefault:k.Z,BaseCombobox:G.Z},props:{recordEdit:{type:Object},recordAdd:{type:Object}},setup(e,o){const{createRecordApi:t,editRecordApi:l,getAllRecordList:i,getRecordList:n}=D.Z,c=(0,A.iH)(""),{QUESTION_DATA_CHANGE:d,commodityGroupNotification:r}=R.Z,s=(0,A.iH)(null),u=(0,A.iH)(null),m=(0,A.iH)(!0),{recordEdit:v,recordAdd:p}=(0,A.BK)(e),g=(0,A.iH)(!1),h=(0,L.oR)(),{TypeSuccess:y,MessageSuccessAdd:f,MessageSuccessEdit:_,AddFormCommodityGroup:b,EditFormCommodityGroup:C}=Z.Z,w=(0,A.iH)({commodityCode:"",commodityName:"",parentID:"0",isActive:!0}),k=(0,A.iH)(null),G=(0,A.iH)({commodityCode:"",commodityName:"",parentID:"0",isActive:!0}),N=(0,A.iH)([]),{listToTree:I}=E.Z;(0,a.wF)((async()=>{await(0,S.Z)(i,null,(async e=>{N.value=I(e,"commodityGroupID")}),h,!0),c.value=b,v.value?(c.value=C,w.value={...v.value},m.value=!1,k.value={...v.value}):(c.value=b,p.value&&(w.value={...p.value}))}));const V=function(){s.value.tagInput.focus()},{handleEventFormCtrlShiftS:H,handleEventInterruptFormCtrlShiftS:P}=T.Z;function F(e){try{H(e,j,null,W,!1,W,!0)}catch(o){console.log(o)}}function M(){return[""===w.value.commodityCode.trim()?r.validateCode:null,""===w.value.commodityName.trim()?r.validateName:null].filter((e=>{if(e)return!0}))}(0,a.bv)((()=>u.value.addEventListener("focus",V))),(0,a.bv)((()=>window.addEventListener("keydown",F))),(0,a.bv)((()=>window.addEventListener("keyup",P))),(0,a.Ah)((()=>window.removeEventListener("focus",V))),(0,a.Ah)((()=>window.removeEventListener("keydown",F))),(0,a.Ah)((()=>window.removeEventListener("keyup",P)));const x=(0,A.iH)(!1);async function O(e){w.value.parentID||(w.value={...w.value,parentID:"0"}),await(0,S.Z)(e,{...w.value},(async e=>{o.emit("handle-save-data-props",{...w.value,commodityGroupID:e}),h.dispatch("config/addNotification",{type:y,message:m.value?f:_}),x.value=!1;const t=h.state.commodityGroup.filter;await(0,S.Z)(i,null,(async e=>{N.value=I(e,"commodityGroupID")}),h,!0),m.value||(m.value=!0),await(0,S.Z)(n,t,(async e=>{h.dispatch("commodityGroup/getRecordListAction",{recordList:I(e.recordList,"commodityGroupID"),totalCount:e.totalCount})}),h,!0)}),h,!1,(()=>{x.value=!0}))}async function W(e){try{const a=M();a.length>0?(g.value=!0,h.dispatch("config/setToggleShowNotificationErrorAction",a)):(m.value?await O(t):await O(l),!0===e&&!1===x.value?o.emit("handle-click-close-modal"):!1===x.value&&(c.value=b,g.value=!1,w.value={...G.value},s.value.tagInput.focus()))}catch(a){console.log(a)}}function U(){try{o.emit("handle-click-close-modal")}catch(e){console.log(e)}}function q(){W(!0)}function j(e){try{e?o.emit("handle-click-close-modal"):m.value?JSON.stringify(w.value)!=JSON.stringify(G.value)?$():o.emit("handle-click-close-modal"):!1===m.value&&(JSON.stringify(w.value)!=JSON.stringify(k.value)?$():o.emit("handle-click-close-modal"))}catch(t){console.log(t)}}function $(){h.dispatch("config/setToggleShowNotificationQuestionAction",{action:q,refuseAction:U,message:d})}return{inputFocus:s,commodityGroup:w,commodityGroupNotification:r,isValid:g,optionCommodityGroup:N,focusLoop:u,titleForm:c,handleCloseModal:j,handleSaveData:W}},emits:["handle-click-close-modal","handle-save-data-props"]},I=t(89);const V=(0,I.Z)(N,[["render",w],["__scopeId","data-v-f2d1d18e"]]);var H=V}}]);
//# sourceMappingURL=332.049bc51d.js.map